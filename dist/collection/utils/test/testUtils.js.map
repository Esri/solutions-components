{"version":3,"file":"testUtils.js","sourceRoot":"","sources":["../../../src/utils/test/testUtils.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;GAcG;AAEH,OAAO,KAAK,MAAM,MAAM,uBAAuB,CAAC;AAGhD,wHAAwH;AAExH,MAAM,CAAC,MAAM,UAAU,GAAG,+BAA+B,CAAC;AAE1D;;;;;;;GAOG;AACH,MAAM,UAAU,4BAA4B,CAC1C,GAAY,EACZ,SAAkB;EAElB,IAAI,GAAG,KAAK,SAAS,EAAE;IACrB,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;GAClB;EACD,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC;EAC1C,OAAO,IAAI,MAAM,CAAC,WAAW,CAAC;IAC5B,QAAQ,EAAE,UAAU;IACpB,WAAW,EAAE,sCAAsC;IACnD,KAAK,EAAE,YAAY;IACnB,YAAY,EAAE,QAAQ;IACtB,YAAY,EAAE,cAAc;IAC5B,mBAAmB,EAAE,QAAQ;IAC7B,eAAe,EAAE,IAAI;IACrB,QAAQ,EAAE,OAAO;IACjB,QAAQ,EAAE,QAAQ;IAClB,MAAM,EAAE,CAAC,SAAS,IAAI,UAAU,CAAC,GAAG,eAAe;GACpD,CAAC,CAAC;AACL,CAAC;AAED;;;;;;GAMG;AACH,MAAM,UAAU,oBAAoB,CAAC,QAAQ,GAAG,iBAAiB;EAC/D,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,QAAQ,CAAQ,CAAC;EACnE,UAAU,CAAC,IAAI,GAAG,QAAQ,CAAC;EAC3B,OAAO,UAAU,CAAC;AACpB,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,MAAM,GAAG,kCAAkC;EAC3E,IAAI,QAAQ,GAAG;IACb,QAAQ,EAAE,kCAAkC;IAC5C,MAAM,EAAE,sBAAsB;IAC9B,KAAK,EAAE,UAAU;IACjB,WAAW,EAAE;MACX,kDAAkD;MAClD,8DAA8D;KAC7D;IACH,cAAc,EAAE,CAAC,kCAAkC,CAAC;IACpD,QAAQ,EAAE,CAAC,kCAAkC,CAAC;IAC9C,+BAA+B,EAAE,CAAC;IAClC,cAAc,EAAE,EAAE;IAClB,MAAM,EAAE,EAAE;IACV,MAAM,EAAE;MACN,IAAI,EAAE,6CAA6C;MACnD,MAAM,EAAE,sBAAsB;MAC9B,mBAAmB,EAAE,MAAM;MAC3B,YAAY,EAAE,EAAE;MAChB,SAAS,EAAE,OAAO;MAClB,aAAa,EAAE,4CAA4C;MAC3D,QAAQ,EAAE,EAAG;MACb,aAAa,EAAE,qBAAqB;MACpC,MAAM,EAAE,IAAI;MACZ,YAAY,EAAE,IAAI;MAClB,SAAS,EAAE,wCAAwC;MACnD,MAAM,EAAE,EAAE;MACV,WAAW,EAAE,IAAI;MACjB,OAAO,EAAE,iBAAiB;MAC1B,cAAc,EAAE;QACd,cAAc;QACd,sBAAsB;OACvB;MACD,KAAK,EAAE,IAAI;MACX,SAAS,EAAE,aAAa;MACxB,UAAU,EAAE,aAAa;KAC1B;IACD,YAAY,EAAE,EAAE;IAChB,mBAAmB,EAAE,CAAC;QACpB,KAAK,EAAE,+IAA+I;QACtJ,MAAM,EAAE,CAAC;QACT,QAAQ,EAAE,EAAE;QACZ,UAAU,EAAE,iBAAiB;QAC7B,YAAY,EAAE,CAAC;OAChB,EAAC;QACA,KAAK,EAAE,2JAA2J;QAClK,MAAM,EAAE,CAAC;QACT,QAAQ,EAAE,EAAE;QACZ,UAAU,EAAE,cAAc;QAC1B,YAAY,EAAE,CAAC;OAChB,CAAC;IACF,WAAW,EAAE,IAAI;GAClB,CAAC;EAEF,IAAI,MAAM,KAAK,kCAAkC,EAAE;IACjD,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,mCAAmC,EAAE,MAAM,CAAC,CAAC,CAAC;GACtG;EAED,OAAO,QAAQ,CAAC;AAClB,CAAC;AAED,wHAAwH;AAExH,SAAS,eAAe;EACtB,OAAO;;;;;;;;;;;;;;;;;KAiBJ,CAAC;AACN,CAAC","sourcesContent":["/** @license\r\n * Copyright 2022 Esri\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as common from \"@esri/solution-common\";\r\nimport { IItemTemplateEdit } from \"../interfaces\";\r\n\r\n//--------------------------------------------------------------------------------------------------------------------//\r\n\r\nexport const PORTAL_URL = \"https://myorg.maps.arcgis.com\";\r\n\r\n/**\r\n * Creates a mock UserSession.\r\n *\r\n * @param now Time for token; defaults to Date.now\r\n * @param portalUrl Portal for token; defaults to \"https://myorg.maps.arcgis.com\"\r\n *\r\n * @returns Mock UserSession\r\n */\r\nexport function createRuntimeMockUserSession(\r\n  now?: number,\r\n  portalUrl?: string\r\n): common.UserSession {\r\n  if (now === undefined) {\r\n    now = Date.now();\r\n  }\r\n  const tomorrow = new Date(now + 86400000);\r\n  return new common.UserSession({\r\n    clientId: \"clientId\",\r\n    redirectUri: \"https://example-app.com/redirect-uri\",\r\n    token: \"fake-token\",\r\n    tokenExpires: tomorrow,\r\n    refreshToken: \"refreshToken\",\r\n    refreshTokenExpires: tomorrow,\r\n    refreshTokenTTL: 1440,\r\n    username: \"casey\",\r\n    password: \"123456\",\r\n    portal: (portalUrl || PORTAL_URL) + \"/sharing/rest\"\r\n  });\r\n}\r\n\r\n/**\r\n * Creates a mock image file.\r\n *\r\n * @param filename Name to give file; defaults to \"sampleImage\"\r\n *\r\n * @returns Buffer usable as a File\r\n */\r\nexport function getSampleImageAsFile(filename = \"sampleImage.png\"): File {\r\n  const pseudoFile = Buffer.from(_imageAsDataUri(), 'base64') as any;\r\n  pseudoFile.name = filename;\r\n  return pseudoFile;\r\n}\r\n\r\nexport function getSampleItemEdit(itemId = \"bd4a2dafd7584253a1bc772f2dd510c4\"): IItemTemplateEdit {\r\n  let itemEdit = {\r\n    \"itemId\": \"bd4a2dafd7584253a1bc772f2dd510c4\",\r\n    \"type\": \"QuickCapture Project\",\r\n    \"key\": \"i7t8659n\",\r\n    \"resources\": [\r\n      \"bd4a2dafd7584253a1bc772f2dd510c4/qc.project.json\",\r\n      \"bd4a2dafd7584253a1bc772f2dd510c4_info_thumbnail/esri_133.png\"\r\n      ],\r\n    \"dependencies\": [\"79036430a6274e17ae915d0278b8569c\"],\r\n    \"groups\": [\"90766e8ee450438fb507d7d2cd03df20\"],\r\n    \"estimatedDeploymentCostFactor\": 2,\r\n    \"relatedItems\": [],\r\n    \"data\": {},\r\n    \"item\": {\r\n      \"id\": \"{{bd4a2dafd7584253a1bc772f2dd510c4.itemId}}\",\r\n      \"type\": \"QuickCapture Project\",\r\n      \"accessInformation\": \"Esri\",\r\n      \"categories\": [],\r\n      \"culture\": \"en-us\",\r\n      \"description\": \"An ArcGIS QuickCapture project description\",\r\n      \"extent\": [ ],\r\n      \"licenseInfo\": \"Copyright 2022 Esri\",\r\n      \"name\": null,\r\n      \"properties\": null,\r\n      \"snippet\": \"An ArcGIS QuickCapture project snippet\",\r\n      \"tags\": [],\r\n      \"thumbnail\": null,\r\n      \"title\": \"Status Reporter\",\r\n      \"typeKeywords\": [\r\n        \"QuickCapture\",\r\n        \"QuickCapture Project\"\r\n      ],\r\n      \"url\": null,\r\n      \"created\": 1645216385000,\r\n      \"modified\": 1645219985000\r\n    },\r\n    \"properties\": {},\r\n    \"resourceFilePaths\": [{\r\n      \"url\": \"https://www.arcgis.com/sharing/rest/content/items/ca924c6db7d247b9a31fa30532fb5913/resources/bd4a2dafd7584253a1bc772f2dd510c4/qc.project.json\",\r\n      \"type\": 3,\r\n      \"folder\": \"\",\r\n      \"filename\": \"qc.project.json\",\r\n      \"updateType\": 3\r\n    },{\r\n      \"url\": \"https://www.arcgis.com/sharing/rest/content/items/ca924c6db7d247b9a31fa30532fb5913/resources/bd4a2dafd7584253a1bc772f2dd510c4_info_thumbnail/esri_133.png\",\r\n      \"type\": 4,\r\n      \"folder\": \"\",\r\n      \"filename\": \"esri_133.png\",\r\n      \"updateType\": 3\r\n    }],\r\n    \"thumbnail\": null\r\n  };\r\n\r\n  if (itemId !== \"bd4a2dafd7584253a1bc772f2dd510c4\") {\r\n    itemEdit = JSON.parse(JSON.stringify(itemEdit).replace(/bd4a2dafd7584253a1bc772f2dd510c4/g, itemId));\r\n  }\r\n\r\n  return itemEdit;\r\n}\r\n\r\n//--------------------------------------------------------------------------------------------------------------------//\r\n\r\nfunction _imageAsDataUri(): string {\r\n  return \"\\\r\niVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAADKklEQVQ4T6XUf1DMeRzH8edu\\\r\n53ZVZ6vLxmo2Q0Y7rtJZJT8abQmdysjETVEWMxgGOzF2/IhkCqNT8qPyo8PE6fzIj/y4qYlU\\\r\nE6MfIottFcLmRyIq1Ne4neGa+ufG57/354/H+/3H6/0WCYIg8J1P1BNSkJ/PpXO5tLa187q5\\\r\nmTFqL6ZFzMRxgEuP7boh00JCcbB3IGZfFuM8f8PbfSD1IyIR3byI8uFVJoxRk5C4uQvWBfHx\\\r\nVHO44jKqcC0/BKgQ7tbzIS0LhvhDX3d400DkSAUFZ3MwPXyAVCr9F/uKhAaHkpqbQkhGEAa9\\\r\nEZeRcmpVOlCFQVwMbvqpLPA/QoruHnYSV+4V1tHS/vYbcqv6Fv4af6zVtsismnB0FmM9qQZB\\\r\nZsuNljdMtttN+fIEtMcm0NgqJmtZGevnJmGqqCNxc6JlktjYWNKT9zIxU463jxKjIYmm65ex\\\r\ncfWi7Nga+nSWUV4k4DxchlQuobbCzJYjyRxYkEVVTZUFCZsShlTexnXvEXgN30RHzjZyk1cQ\\\r\nvjIV57FP6a/4B5NBoOxsI+rFbhhN7yjfaGC0Us3pvDMWJDI8gvczPTgVfwOeVhC8NJ7G0nME\\\r\nxf1JbWsREg5gZ99E9qxiNJl+PGn7xP3974myH8WGTXEWZFKAhqZ+7lzLTsX6xB1G/dSbj49f\\\r\nU5O9lbeD1Xy4dAGxqB7pCwMSNwc6nKywFfkSoXDmj107LUjE1BCkwToO7dEzPuoFbn5OFCWZ\\\r\nuX28FqavA1UgWDkhM6+gQ2agRTkam5SXaAa1czrvogUpLb5Kys59/BXox4+rtIhteuM51xUH\\\r\np07Op6nhdz20ixHJVyMUXIEwHZq8Z8wJ+oWoGO23nPj+6kGgLo0E7Xysx5pxiffl1RMfzGsr\\\r\nYag7PKgGaQnUP2f8koU4ltSRcz6va9i+VErHPizKNaDfmApt2yFwPuwogcZyWFsFvQpZKDFy\\\r\n91Qlh/4+ikKh6I58+fH2GIZXgIbS6mKq8+8jOfiIwXWFPDu5C130DNYtm8ejhoavQJfY/3ej\\\r\nblZWkpGegclk5FPzc2ztfqa1o5OoWdFEzo7utsk9noL/e14+AxP0YqryqgPxAAAAAElFTkSu\\\r\nQmCC\";\r\n}\r\n"]}