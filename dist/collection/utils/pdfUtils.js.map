{"version":3,"file":"pdfUtils.js","sourceRoot":"","sources":["../../src/utils/pdfUtils.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;GAcG;AAEH,OAAO,KAAK,gBAAgB,MAAM,+CAA+C,CAAC;AAClF,OAAO,KAAK,SAAS,MAAM,wCAAwC,CAAC;AACpE,OAAO,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AAE7C;;;;;GAKG;AACH,MAAM,UAAU,SAAS,CACvB,MAAkB,EAClB,oBAAyB;EAEzB,gBAAgB,CAAC,MAAM,EAAE,oBAAoB,EAAE,UAAU,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AACpF,CAAC;AAED;;;;;;GAMG;AACH,SAAS,gBAAgB,CACvB,MAAkB,EAClB,oBAAyB,EACzB,SAAiB;EAEjB,MAAM,MAAM,GAAG,IAAI,gBAAgB,CAAC,gBAAgB,EAAE,CAAC;EACvD,MAAM,CAAC,UAAU,CACf;IACE,QAAQ,EAAE,QAAQ;GACnB,EAAE,YAAY,CAAC,+BAA+B,CAAC,EAAE,IAAI,EACtD,SAAS,EAAE,KAAK,CACjB;KACA,IAAI,CACH,GAAG,EAAE;IACH,MAAM,QAAQ,GAAG,IAAI,SAAS,CAAC,SAAS,EAAE,CAAC;IAC3C,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC;OAC1B,IAAI,CACH,KAAK,IAAI,EAAE;MACT,MAAM,QAAQ,CAAC,cAAc,CAC3B,MAAM,EACN,oBAAoB,CAAC,SAAS,EAC9B,CAAC,CACF,CAAC;MAEF,MAAM,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC,CACF,CAAC;EACJ,CAAC,CACF,CAAC;AAEJ,CAAC","sourcesContent":["/** @license\r\n * Copyright 2022 Esri\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as PDFCreator_jsPDF from \"../assets/arcgis-pdf-creator/PDFCreator_jsPDF\";\r\nimport * as PDFLabels from \"../assets/arcgis-pdf-creator/PDFLabels\";\r\nimport { getAssetPath } from \"@stencil/core\";\r\n\r\n/**\r\n * Exports a PDF of labels.\r\n *\r\n * @param labels Labels to write\r\n * @param labelPageDescription Page format to use for labels\r\n */\r\nexport function exportPDF(\r\n  labels: string[][],\r\n  labelPageDescription: any\r\n): void {\r\n  _downloadPDFFile(labels, labelPageDescription, `notify-${Date.now().toString()}`);\r\n}\r\n\r\n/**\r\n * Downloads the PDF file.\r\n *\r\n * @param labels Labels to write\r\n * @param labelPageDescription Page format to use for labels\r\n * @param fileTitle Title (without file extension) to use for file; defaults to \"export\"\r\n */\r\nfunction _downloadPDFFile(\r\n  labels: string[][],\r\n  labelPageDescription: any,\r\n  fileTitle: string\r\n): void {\r\n  const pdfLib = new PDFCreator_jsPDF.PDFCreator_jsPDF();\r\n  pdfLib.initialize(\r\n    {\r\n      pageType: \"ANSI_A\"\r\n    }, getAssetPath(`../assets/arcgis-pdf-creator/`), \"en\",\r\n    fileTitle, false\r\n  )\r\n  .then(\r\n    () => {\r\n      const labeller = new PDFLabels.PDFLabels();\r\n      labeller.initialize(pdfLib)\r\n      .then(\r\n        async () => {\r\n          await labeller.addLabelsToDoc(\r\n            labels,\r\n            labelPageDescription.labelSpec,\r\n            1\r\n          );\r\n\r\n          pdfLib.save();\r\n        }\r\n      );\r\n    }\r\n  );\r\n\r\n}\r\n"]}