/*!
 * Copyright 2022 Esri
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 */
import{r as t,c as i,h as e,H as a,g as o}from"./p-c2f00d41.js";import{l as s}from"./p-2396a25c.js";import{g as c}from"./p-4f462875.js";import{a as n}from"./p-dbc9a5a8.js";import"./p-e1a4994d.js";const l=class{constructor(e){t(this,e),this.expandMap=i(this,"expandMap",7),this._loadedId="",this._mapDivId="map-div",this.mapInfos=[],this._mapListExpanded=!1,this._mapView=void 0,this._translations=void 0,this._webMapId=""}_webMapIdWatchHandler(t,i){t&&JSON.stringify(t)!==JSON.stringify(i)&&this._loadMap(t)}mapInfosWatchHandler(t,i){t&&JSON.stringify(t)!==JSON.stringify(i)&&this._loadMap(t[0].id)}async componentWillLoad(){await this._getTranslations(),await this._initModules()}componentDidRender(){this._loadMap(this._webMapId)}render(){return e(a,null,this._getToolbar(),this._getMapNameList(this._mapListExpanded),e("div",{class:"map-height",id:this._mapDivId}))}async _initModules(){const[t,i]=await s(["esri/WebMap","esri/views/MapView"]);this.WebMap=t,this.MapView=i}_getToolbar(){return e("div",{class:"display-flex"},e("calcite-action-bar",{class:"border-bottom-1 action-bar-size","expand-disabled":!0,layout:"horizontal",slot:"header"},this._getMapPicker(),this._getActionGroup("home",!1,this._translations.home,(()=>this._goHome())),this._getActionGroup("list",!1,this._translations.list,(()=>this._showList())),this._getActionGroup("magnifying-glass-plus",!1,this._translations.search,(()=>this._search())),this._getActionGroup("plus",!1,this._translations.zoomIn,(()=>this._zoomIn())),this._getActionGroup("minus",!1,this._translations.zoomOut,(()=>this._zoomOut())),this._getActionGroup("expand",!1,this._translations.expand,(()=>this._expand()))))}_loadMap(t){if(""===t&&this.mapInfos.length>0&&(t=this.mapInfos[0].id),this._loadedId!==t){const i=new this.WebMap({portalItem:{id:t}});this._mapView=new this.MapView({container:this._mapDivId,map:i,resizeAlign:"top-left"}),this._loadedId=t}}_getActionGroup(t,i,a,o){return e("calcite-action-group",{class:"action-center width-1-6",layout:"horizontal"},e("calcite-action",{alignment:"center",class:"width-full height-full",compact:!1,disabled:i,icon:t,id:t,onClick:o,text:""},e("calcite-icon",{icon:"cheveron-up",scale:"s",slot:"icon"})),e("calcite-tooltip",{label:"",placement:"bottom","reference-element":t},e("span",null,a)))}_getMapPicker(){const t=this._mapListExpanded?"chevron-up":"chevron-down";return e("calcite-action-group",{class:"action-center width-1-6",layout:"horizontal"},e("calcite-block",{class:"action-center block-button width-full height-full",heading:"",onClick:()=>this._chooseMap()},e("calcite-icon",{icon:"map",scale:"s",slot:"icon"}),e("calcite-icon",{icon:t,scale:"s",slot:"icon"}),e("calcite-tooltip",{label:"",placement:"bottom"},e("span",null,this._translations.mapName))))}_getMapNameList(t){return e("div",{class:t?"map-list":"display-none"},e("calcite-pick-list",{id:"mapList"},this.mapInfos.map((t=>e("calcite-pick-list-item",{label:t.name,onClick:()=>this._webMapSelected(t.id),selected:t.id===this._loadedId,value:t.id})))))}_webMapSelected(t){this._mapListExpanded=!1,this._webMapId=t}_chooseMap(){this._mapListExpanded=!this._mapListExpanded}_goHome(){alert("go home")}_showList(){alert("show list")}_search(){alert("search")}_zoomIn(){alert("zoom in")}_zoomOut(){alert("zoom out")}_expand(){this.expandMap.emit(n.EXPAND)}async _getTranslations(){const t=await c(this.el);this._translations=t[0]}get el(){return o(this)}static get watchers(){return{_webMapId:["_webMapIdWatchHandler"],mapInfos:["mapInfosWatchHandler"]}}};l.style=":host{display:block;--calcite-label-margin-bottom:0;--calcite-block-padding:0}.action-bar-size{height:3.5rem;width:100%}.action-center{-webkit-box-align:center;-webkit-align-items:center;-ms-grid-row-align:center;align-items:center;align-content:center;justify-content:center}.border-bottom-1{border-width:0px;border-bottom-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3)}.width-1-7{width:14.28%}.width-1-6{width:16.66%}.width-full{width:100%}.height-full{height:100%}.display-flex{display:flex}.block-button{border-bottom:0}.block-button:hover{background-color:var(--calcite-ui-foreground-2)}.block-button:active{background-color:var(--calcite-ui-foreground-3)}.map-view{padding:0;margin:0;height:100%;width:100%}.map-list{position:absolute;inset:3.5rem 0 0 0;display:flex;flex-direction:column;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background);z-index:1;width:100%;height:-moz-fit-content;height:fit-content}.map-height{height:calc(100% - 58px)}.display-none{display:none}.esri-zoom{display:none !important}";export{l as map_card}