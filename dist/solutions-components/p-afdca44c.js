/*!
 * Copyright 2022 Esri
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 */
import{c as t}from"./p-00444009.js";import{e as r}from"./p-59fd466e.js";import{c as i,a as e,b as n}from"./p-e1a4994d.js";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var o=function(t,r){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},o(t,r)},s=function(){return s=Object.assign||function(t){for(var r,i=1,e=arguments.length;i<e;i++)for(var n in r=arguments[i])Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t},s.apply(this,arguments)};function a(t){return Object.keys(t).some((function(r){var i=t[r];if(!i)return!1;switch(i&&i.toParam&&(i=i.toParam()),i.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function u(t){var r={};return Object.keys(t).forEach((function(i){var e,n,o=t[i];if(o&&o.toParam&&(o=o.toParam()),o||0===o||"boolean"==typeof o||"string"==typeof o){var s;switch(o.constructor.name){case"Array":var a=null===(n=null===(e=o[0])||void 0===e?void 0:e.constructor)||void 0===n?void 0:n.name;s="Array"===a?o:"Object"===a?JSON.stringify(o):o.join(",");break;case"Object":s=JSON.stringify(o);break;case"Date":s=o.valueOf();break;case"Function":s=null;break;case"Boolean":s=o+"";break;default:s=o}(s||0===s||"string"==typeof s||Array.isArray(s))&&(r[i]=s)}})),r}function f(t,r){return Array.isArray(r)&&r[0]&&Array.isArray(r[0])?r.map((function(r){return f(t,r)})).join("&"):encodeURIComponent(t)+"="+encodeURIComponent(r)}function c(t){var r=u(t);return Object.keys(r).map((function(t){return f(t,r[t])})).join("&")}var h=function(t,r,i,e,n){t=t||"UNKNOWN_ERROR",r=r||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===r?t:r+": "+t,this.originalMessage=t,this.code=r,this.response=i,this.url=e,this.options=n};(h.prototype=Object.create(Error.prototype)).constructor=h;var l,d,p,m="@esri/arcgis-rest-js",v={httpMethod:"POST",params:{f:"json"}},b=function(t){function r(r,i,e,n,o){void 0===r&&(r="AUTHENTICATION_ERROR"),void 0===i&&(i="AUTHENTICATION_ERROR_CODE");var s=t.call(this,r,i,e,n,o)||this;return s.name="ArcGISAuthError",s.message="AUTHENTICATION_ERROR_CODE"===i?r:i+": "+r,s}return function(t,r){function i(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}(r,t),r.prototype.retry=function(t,r){var i=this;void 0===r&&(r=3);var e=0,n=function(o,a){t(i.url,i.options).then((function(t){var r=s(s({},i.options),{authentication:t});return e+=1,g(i.url,r)})).then((function(t){o(t)})).catch((function(t){"ArcGISAuthError"===t.name&&e<r?n(o,a):a("ArcGISAuthError"===t.name&&e>=r?i:t)}))};return new Promise((function(t,r){n(t,r)}))},r}(h);function g(t,r){void 0===r&&(r={params:{f:"json"}});var i=s(s(s({httpMethod:"POST"},v),r),{params:s(s({},v.params),r.params),headers:s(s({},v.headers),r.headers)}),e=[],n=[];if(i.fetch||"undefined"==typeof fetch?(e.push("`fetch`"),n.push("`node-fetch`")):i.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(e.push("`Promise`"),n.push("`es6-promise`")),"undefined"==typeof FormData&&(e.push("`FormData`"),n.push("`isomorphic-form-data`")),!i.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+e.join(", ")+". We recommend installing the "+n.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var o=i.httpMethod,f=i.authentication,l=i.rawResponse,d=s({f:"json"},i.params),p=null,g={method:o,credentials:i.credentials||"same-origin"};return i.headers&&i.headers["X-Esri-Auth-Client-Id"]&&t.indexOf("/oauth2/platformSelf")>-1&&(g.credentials="include"),(f?f.getToken(t,{fetch:i.fetch}).catch((function(r){return r.url=t,r.options=i,p=r,Promise.resolve("")})):Promise.resolve("")).then((function(r){r.length&&(d.token=r),f&&f.getDomainCredentials&&(g.credentials=f.getDomainCredentials(t));var e={};if("GET"===g.method){d.token&&i.hideToken&&"undefined"==typeof window&&(e["X-Esri-Authorization"]="Bearer "+d.token,delete d.token);var n=""===c(d)?t:t+"?"+c(d);i.maxUrlLength&&n.length>i.maxUrlLength||d.token&&i.hideToken?(g.method="POST",r.length&&i.hideToken&&(d.token=r,delete e["X-Esri-Authorization"])):t=n}var o=new RegExp("/items/.+/updateResources").test(t);return"POST"===g.method&&(g.body=function(t,r){var i=a(t)||r,e=u(t);if(i){var n=new FormData;return Object.keys(e).forEach((function(t){"undefined"!=typeof Blob&&e[t]instanceof Blob?n.append(t,e[t],e.fileName||e[t].name||t):n.append(t,e[t])})),n}return c(t)}(d,o)),g.headers=s(s({},e),i.headers),"undefined"!=typeof window||g.headers.referer||(g.headers.referer=m),a(d)||o||(g.headers["Content-Type"]="application/x-www-form-urlencoded"),i.fetch(t,g)})).then((function(r){if(!r.ok)throw new h(r.statusText,"HTTP "+r.status,r,t,i);if(l)return r;switch(d.f){case"json":case"geojson":return r.json();case"html":case"text":return r.text();default:return r.blob()}})).then((function(r){if("json"!==d.f&&"geojson"!==d.f||l)return r;var e=function(t,r,i,e,n){if(t.code>=400)throw new h(s=t.message,a=t.code,t,r,e);if(t.error){var o=t.error,s=o.message,a=o.code,u=o.messageCode,f=u||a||"UNKNOWN_ERROR_CODE";if(498===a||499===a||"GWM_0003"===u||400===a&&"Unable to generate token."===s)throw n||new b(s,f,t,r,e);throw new h(s,f,t,r,e)}if("failed"===t.status||"failure"===t.status){s=void 0,a="UNKNOWN_ERROR_CODE";try{s=JSON.parse(t.statusMessage).message,a=JSON.parse(t.statusMessage).code}catch(r){s=t.statusMessage||t.message}throw new h(s,a,t,r,e)}return t}(r,t,0,i,p);if(p){var n=t.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];i.authentication.federatedServers[n]={token:[],expires:new Date(Date.now()+864e5)},p=null}return e}))}function w(t){return"string"!=typeof t||"/"===(t=t.trim())[t.length-1]&&(t=t.slice(0,-1)),t}
/** @license
 * Copyright 2018 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.Data=0]="Data",t[t.Info=1]="Info",t[t.Metadata=2]="Metadata",t[t.Resource=3]="Resource",t[t.Thumbnail=4]="Thumbnail"}(l||(l={})),function(t){t[t.Data=0]="Data",t[t.Info=1]="Info",t[t.Metadata=2]="Metadata",t[t.Resource=3]="Resource",t[t.Thumbnail=4]="Thumbnail"}(d||(d={})),function(t){t[t.Started=0]="Started",t[t.Created=1]="Created",t[t.Cancelled=2]="Cancelled",t[t.Finished=3]="Finished",t[t.Ignored=4]="Ignored",t[t.Failed=5]="Failed",t[t.Unknown=6]="Unknown"}(p||(p={}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var y=function(){return y=Object.assign||function(t){for(var r,i=1,e=arguments.length;i<e;i++)for(var n in r=arguments[i])Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t},y.apply(this,arguments)};function k(t){return void 0===t&&(t={}),t.portal?w(t.portal):t.authentication?t.authentication.portal:"https://www.arcgis.com/sharing/rest"}function x(t){return t.owner?Promise.resolve(t.owner):t.item&&t.item.owner?Promise.resolve(t.item.owner):t.authentication&&t.authentication.getUsername?t.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}var S=i((function(t){
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
t.exports=function t(r,i,e){function o(a,u){if(!i[a]){if(!r[a]){var f="function"==typeof n&&n;if(!u&&f)return f(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[a]={exports:{}};r[a][0].call(h.exports,(function(t){return o(r[a][1][t]||t)}),h,h.exports,t,r,i,e)}return i[a].exports}for(var s="function"==typeof n&&n,a=0;a<e.length;a++)o(e[a]);return o}({1:[function(t,r,i){var e=t("./utils"),n=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t){for(var r,i,n,s,a,u,f=[],c=0,h=t.length,l=h,d="string"!==e.getTypeOf(t);c<t.length;)l=h-c,n=d?(r=t[c++],i=c<h?t[c++]:0,c<h?t[c++]:0):(r=t.charCodeAt(c++),i=c<h?t.charCodeAt(c++):0,c<h?t.charCodeAt(c++):0),s=(3&r)<<4|i>>4,a=1<l?(15&i)<<2|n>>6:64,u=2<l?63&n:64,f.push(o.charAt(r>>2)+o.charAt(s)+o.charAt(a)+o.charAt(u));return f.join("")},i.decode=function(t){var r,i,e,s,a,u,f=0,c=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var l,d=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&d--,t.charAt(t.length-2)===o.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=n.uint8array?new Uint8Array(0|d):new Array(0|d);f<t.length;)r=o.indexOf(t.charAt(f++))<<2|(s=o.indexOf(t.charAt(f++)))>>4,i=(15&s)<<4|(a=o.indexOf(t.charAt(f++)))>>2,e=(3&a)<<6|(u=o.indexOf(t.charAt(f++))),l[c++]=r,64!==a&&(l[c++]=i),64!==u&&(l[c++]=e);return l}},{"./support":30,"./utils":32}],2:[function(t,r){var i=t("./external"),e=t("./stream/DataWorker"),n=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function s(t,r,i,e,n){this.compressedSize=t,this.uncompressedSize=r,this.crc32=i,this.compression=e,this.compressedContent=n}s.prototype={getContentWorker:function(){var t=new e(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),r=this;return t.on("end",(function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new e(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,r,i){return t.pipe(new n).pipe(new o("uncompressedSize")).pipe(r.compressWorker(i)).pipe(new o("compressedSize")).withStreamInfo("compression",r)},r.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var e=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new e("STORE compression")},uncompressWorker:function(){return new e("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r){var i=t("./utils"),e=function(){for(var t,r=[],i=0;i<256;i++){t=i;for(var e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;r[i]=t}return r}();r.exports=function(t,r){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,r,i){var n=e,o=0+i;t^=-1;for(var s=0;s<o;s++)t=t>>>8^n[255&(t^r[s])];return-1^t}(0|r,t,t.length):function(t,r,i){var n=e,o=0+i;t^=-1;for(var s=0;s<o;s++)t=t>>>8^n[255&(t^r.charCodeAt(s))];return-1^t}(0|r,t,t.length):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r){var i;i="undefined"!=typeof Promise?Promise:t("lie"),r.exports={Promise:i}},{lie:37}],7:[function(t,r,i){var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=t("pako"),o=t("./utils"),s=t("./stream/GenericWorker"),a=e?"uint8array":"array";function u(t,r){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=r,this.meta={}}i.magic="\b\0",o.inherits(u,s),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(r){t.push({data:r,meta:t.meta})}},i.compressWorker=function(t){return new u("Deflate",t)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r){function i(t,r){var i,e="";for(i=0;i<r;i++)e+=String.fromCharCode(255&t),t>>>=8;return e}function e(t,r,e,o,f,c){var h,l,d=t.file,p=t.compression,m=c!==s.utf8encode,v=n.transformTo("string",c(d.name)),b=n.transformTo("string",s.utf8encode(d.name)),g=d.comment,w=n.transformTo("string",c(g)),y=n.transformTo("string",s.utf8encode(g)),k=b.length!==d.name.length,x=y.length!==g.length,S="",A="",E="",j=d.dir,R=d.date,O={crc32:0,compressedSize:0,uncompressedSize:0};r&&!e||(O.crc32=t.crc32,O.compressedSize=t.compressedSize,O.uncompressedSize=t.uncompressedSize);var _=0;r&&(_|=8),m||!k&&!x||(_|=2048);var z=0,I=0;j&&(z|=16),"UNIX"===f?(I=798,z|=function(t,r){var i=t;return t||(i=r?16893:33204),(65535&i)<<16}(d.unixPermissions,j)):(I=20,z|=function(t){return 63&(t||0)}(d.dosPermissions)),h=R.getUTCHours(),h<<=6,h|=R.getUTCMinutes(),h<<=5,h|=R.getUTCSeconds()/2,l=R.getUTCFullYear()-1980,l<<=4,l|=R.getUTCMonth()+1,l<<=5,l|=R.getUTCDate(),k&&(A=i(1,1)+i(a(v),4)+b,S+="up"+i(A.length,2)+A),x&&(E=i(1,1)+i(a(w),4)+y,S+="uc"+i(E.length,2)+E);var P="";return P+="\n\0",P+=i(_,2),P+=p.magic,P+=i(h,2),P+=i(l,2),P+=i(O.crc32,4),P+=i(O.compressedSize,4),P+=i(O.uncompressedSize,4),P+=i(v.length,2),P+=i(S.length,2),{fileRecord:u.LOCAL_FILE_HEADER+P+v+S,dirRecord:u.CENTRAL_FILE_HEADER+i(I,2)+P+i(w.length,2)+"\0\0\0\0"+i(z,4)+i(o,4)+v+S+w}}var n=t("../utils"),o=t("../stream/GenericWorker"),s=t("../utf8"),a=t("../crc32"),u=t("../signature");function f(t,r,i,e){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=r,this.zipPlatform=i,this.encodeFileName=e,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(f,o),f.prototype.push=function(t){var r=t.meta.percent||0,i=this.entriesCount,e=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:i?(r+100*(i-e-1))/i:100}}))},f.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var r=this.streamFiles&&!t.file.dir;if(r){var i=e(t,r,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(t){this.accumulate=!1;var r=this.streamFiles&&!t.file.dir,n=e(t,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),r)this.push({data:function(t){return u.DATA_DESCRIPTOR+i(t.crc32,4)+i(t.compressedSize,4)+i(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var t=this.bytesWritten,r=0;r<this.dirRecords.length;r++)this.push({data:this.dirRecords[r],meta:{percent:100}});var e=function(t,r,e,o,s){var a=n.transformTo("string",s(o));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(t,2)+i(t,2)+i(r,4)+i(e,4)+i(a.length,2)+a}(this.dirRecords.length,this.bytesWritten-t,t,this.zipComment,this.encodeFileName);this.push({data:e,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(t){this._sources.push(t);var r=this;return t.on("data",(function(t){r.processChunk(t)})),t.on("end",(function(){r.closedSource(r.previous.streamInfo),r._sources.length?r.prepareNextSource():r.end()})),t.on("error",(function(t){r.error(t)})),this},f.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(t){var r=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var i=0;i<r.length;i++)try{r[i].error(t)}catch(t){}return!0},f.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,r=0;r<t.length;r++)t[r].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var e=t("../compressions"),n=t("./ZipFileWorker");i.generateWorker=function(t,r,i){var o=new n(r.streamFiles,i,r.platform,r.encodeFileName),s=0;try{t.forEach((function(t,i){s++;var n=function(t,r){var i=t||r,n=e[i];if(!n)throw new Error(i+" is not a valid compression method !");return n}(i.options.compression,r.compression),a=i.dir,u=i.date;i._compressWorker(n,i.options.compressionOptions||r.compressionOptions||{}).withStreamInfo("file",{name:t,dir:a,date:u,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new i;for(var r in this)"function"!=typeof this[r]&&(t[r]=this[r]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(t,r){return(new i).loadAsync(t,r)},i.external=t("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r){var i=t("./utils"),e=t("./external"),n=t("./utf8"),o=t("./zipEntries"),s=t("./stream/Crc32Probe"),a=t("./nodejsUtils");function u(t){return new e.Promise((function(r,i){var e=t.decompressed.getContentWorker().pipe(new s);e.on("error",(function(t){i(t)})).on("end",(function(){e.streamInfo.crc32!==t.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):r()})).resume()}))}r.exports=function(t,r){var s=this;return r=i.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),a.isNode&&a.isStream(t)?e.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,r.optimizedBinaryString,r.base64).then((function(t){var i=new o(r);return i.load(t),i})).then((function(t){var i=[e.Promise.resolve(t)],n=t.files;if(r.checkCRC32)for(var o=0;o<n.length;o++)i.push(u(n[o]));return e.Promise.all(i)})).then((function(t){for(var e=t.shift(),n=e.files,o=0;o<n.length;o++){var a=n[o],u=a.fileNameStr,f=i.resolve(a.fileNameStr);s.file(f,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:r.createFolders}),a.dir||(s.file(f).unsafeOriginalName=u)}return e.zipComment.length&&(s.comment=e.zipComment),s}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r){var i=t("../utils"),e=t("../stream/GenericWorker");function n(t,r){e.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(r)}i.inherits(n,e),n.prototype._bindStream=function(t){var r=this;(this._stream=t).pause(),t.on("data",(function(t){r.push({data:t,meta:{percent:0}})})).on("error",(function(t){r.isPaused?this.generatedError=t:r.error(t)})).on("end",(function(){r.isPaused?r._upstreamEnded=!0:r.end()}))},n.prototype.pause=function(){return!!e.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!e.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r){var i=t("readable-stream").Readable;function e(t,r,e){i.call(this,r),this._helper=t;var n=this;t.on("data",(function(t,r){n.push(t)||n._helper.pause(),e&&e(r)})).on("error",(function(t){n.emit("error",t)})).on("end",(function(){n.push(null)}))}t("../utils").inherits(e,i),e.prototype._read=function(){this._helper.resume()},r.exports=e},{"../utils":32,"readable-stream":16}],14:[function(t,r){r.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,r);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,r)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var r=new Buffer(t);return r.fill(0),r},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,r){function i(t,r,i){var e,s=n.getTypeOf(r),c=n.extend(i||{},a);c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(t=p(t)),c.createFolders&&(e=d(t))&&m.call(this,e,!0),i&&void 0!==i.binary||(c.binary=!("string"===s&&!1===c.binary&&!1===c.base64)),(r instanceof u&&0===r.uncompressedSize||c.dir||!r||0===r.length)&&(c.base64=!1,c.binary=!0,r="",c.compression="STORE",s="string");var v;v=r instanceof u||r instanceof o?r:h.isNode&&h.isStream(r)?new l(t,r):n.prepareContent(t,r,c.binary,c.optimizedBinaryString,c.base64);var b=new f(t,v,c);this.files[t]=b}var e=t("./utf8"),n=t("./utils"),o=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),a=t("./defaults"),u=t("./compressedObject"),f=t("./zipObject"),c=t("./generate"),h=t("./nodejsUtils"),l=t("./nodejs/NodejsStreamInputAdapter"),d=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var r=t.lastIndexOf("/");return 0<r?t.substring(0,r):""},p=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,r){return r=void 0!==r?r:a.createFolders,t=p(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:r}),this.files[t]};function v(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var r,i,e;for(r in this.files)e=this.files[r],(i=r.slice(this.root.length,r.length))&&r.slice(0,this.root.length)===this.root&&t(i,e)},filter:function(t){var r=[];return this.forEach((function(i,e){t(i,e)&&r.push(e)})),r},file:function(t,r,e){if(1!==arguments.length)return i.call(this,t=this.root+t,r,e),this;if(v(t)){var n=t;return this.filter((function(t,r){return!r.dir&&n.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(v(t))return this.filter((function(r,i){return i.dir&&t.test(r)}));var r=m.call(this,this.root+t),i=this.clone();return i.root=r.name,i},remove:function(t){var r=this.files[t=this.root+t];if(r||("/"!==t.slice(-1)&&(t+="/"),r=this.files[t]),r&&!r.dir)delete this.files[t];else for(var i=this.filter((function(r,i){return i.name.slice(0,t.length)===t})),e=0;e<i.length;e++)delete this.files[i[e].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var r,i={};try{if((i=n.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:e.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");n.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS"),r=c.generateWorker(this,i,i.comment||this.comment||"")}catch(t){(r=new o("error")).error(t)}return new s(r,i.type||"string",i.mimeType)},generateAsync:function(t,r){return this.generateInternalStream(t).accumulate(r)},generateNodeStream:function(t,r){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(r)}};r.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r){r.exports=t("stream")},{stream:void 0}],17:[function(t,r){var i=t("./DataReader");function e(t){i.call(this,t);for(var r=0;r<this.data.length;r++)t[r]=255&t[r]}t("../utils").inherits(e,i),e.prototype.byteAt=function(t){return this.data[this.zero+t]},e.prototype.lastIndexOfSignature=function(t){for(var r=t.charCodeAt(0),i=t.charCodeAt(1),e=t.charCodeAt(2),n=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===r&&this.data[o+1]===i&&this.data[o+2]===e&&this.data[o+3]===n)return o-this.zero;return-1},e.prototype.readAndCheckSignature=function(t){var r=t.charCodeAt(0),i=t.charCodeAt(1),e=t.charCodeAt(2),n=t.charCodeAt(3),o=this.readData(4);return r===o[0]&&i===o[1]&&e===o[2]&&n===o[3]},e.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=e},{"../utils":32,"./DataReader":18}],18:[function(t,r){var i=t("../utils");function e(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}e.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var r,i=0;for(this.checkOffset(t),r=this.index+t-1;r>=this.index;r--)i=(i<<8)+this.byteAt(r);return this.index+=t,i},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},r.exports=e},{"../utils":32}],19:[function(t,r){var i=t("./Uint8ArrayReader");function e(t){i.call(this,t)}t("../utils").inherits(e,i),e.prototype.readData=function(t){this.checkOffset(t);var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=e},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r){var i=t("./DataReader");function e(t){i.call(this,t)}t("../utils").inherits(e,i),e.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},e.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},e.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},e.prototype.readData=function(t){this.checkOffset(t);var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=e},{"../utils":32,"./DataReader":18}],21:[function(t,r){var i=t("./ArrayReader");function e(t){i.call(this,t)}t("../utils").inherits(e,i),e.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=e},{"../utils":32,"./ArrayReader":17}],22:[function(t,r){var i=t("../utils"),e=t("../support"),n=t("./ArrayReader"),o=t("./StringReader"),s=t("./NodeBufferReader"),a=t("./Uint8ArrayReader");r.exports=function(t){var r=i.getTypeOf(t);return i.checkSupport(r),"string"!==r||e.uint8array?"nodebuffer"===r?new s(t):e.uint8array?new a(i.transformTo("uint8array",t)):new n(i.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,r){var i=t("./GenericWorker"),e=t("../utils");function n(t){i.call(this,"ConvertWorker to "+t),this.destType=t}e.inherits(n,i),n.prototype.processChunk=function(t){this.push({data:e.transformTo(this.destType,t.data),meta:t.meta})},r.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(t,r){var i=t("./GenericWorker"),e=t("../crc32");function n(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(n,i),n.prototype.processChunk=function(t){this.streamInfo.crc32=e(t.data,this.streamInfo.crc32||0),this.push(t)},r.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r){var i=t("../utils"),e=t("./GenericWorker");function n(t){e.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(n,e),n.prototype.processChunk=function(t){t&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+t.data.length),e.prototype.processChunk.call(this,t)},r.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(t,r){var i=t("../utils"),e=t("./GenericWorker");function n(t){e.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){r.dataIsReady=!0,r.data=t,r.max=t&&t.length||0,r.type=i.getTypeOf(t),r.isPaused||r._tickAndRepeat()}),(function(t){r.error(t)}))}i.inherits(n,e),n.prototype.cleanUp=function(){e.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!e.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,r=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,r);break;case"uint8array":t=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":t=this.data.slice(this.index,r)}return this.index=r,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(t,r){function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,r){return this._listeners[t].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,r){if(this._listeners[t])for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].call(this,r)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var r=this;return t.on("data",(function(t){r.processChunk(t)})),t.on("end",(function(){r.end()})),t.on("error",(function(t){r.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,r){return this.extraStreamInfo[t]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},r.exports=i},{}],29:[function(t,r){var i=t("../utils"),e=t("./ConvertWorker"),n=t("./GenericWorker"),o=t("../base64"),s=t("../support"),a=t("../external"),u=null;if(s.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function f(t,r,o){var s=r;switch(r){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=r,this._mimeType=o,i.checkSupport(s),this._worker=t.pipe(new e(s)),t.lock()}catch(t){this._worker=new n("error"),this._worker.error(t)}}f.prototype={accumulate:function(t){return function(t,r){return new a.Promise((function(e,n){var s=[],a=t._internalType,u=t._outputType,f=t._mimeType;t.on("data",(function(t,i){s.push(t),r&&r(i)})).on("error",(function(t){s=[],n(t)})).on("end",(function(){try{var t=function(t,r,e){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",r),e);case"base64":return o.encode(r);default:return i.transformTo(t,r)}}(u,function(t,r){var i,e=0,n=null,o=0;for(i=0;i<r.length;i++)o+=r[i].length;switch(t){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(n=new Uint8Array(o),i=0;i<r.length;i++)n.set(r[i],e),e+=r[i].length;return n;case"nodebuffer":return Buffer.concat(r);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,s),f);e(t)}catch(t){n(t)}s=[]})).resume()}))}(this,t)},on:function(t,r){var e=this;return this._worker.on(t,"data"===t?function(t){r.call(e,t.data,t.meta)}:function(){i.delay(r,arguments,e)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var e=new ArrayBuffer(0);try{i.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(e),i.blob=0===n.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch(t){i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var e=t("./utils"),n=t("./support"),o=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function f(){s.call(this,"utf-8 decode"),this.leftOver=null}function c(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,i.utf8encode=function(t){return n.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var r,i,e,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(e=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(e-56320),o++),u+=i<128?1:i<2048?2:i<65536?3:4;for(r=n.uint8array?new Uint8Array(u):new Array(u),o=s=0;s<u;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(e=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(e-56320),o++),i<128?r[s++]=i:(i<2048?r[s++]=192|i>>>6:(i<65536?r[s++]=224|i>>>12:(r[s++]=240|i>>>18,r[s++]=128|i>>>12&63),r[s++]=128|i>>>6&63),r[s++]=128|63&i);return r}(t)},i.utf8decode=function(t){return n.nodebuffer?e.transformTo("nodebuffer",t).toString("utf-8"):function(t){var r,i,n,o,s=t.length,u=new Array(2*s);for(r=i=0;r<s;)if((n=t[r++])<128)u[i++]=n;else if(4<(o=a[n]))u[i++]=65533,r+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&r<s;)n=n<<6|63&t[r++],o--;1<o?u[i++]=65533:n<65536?u[i++]=n:(u[i++]=55296|(n-=65536)>>10&1023,u[i++]=56320|1023&n)}return u.length!==i&&(u.subarray?u=u.subarray(0,i):u.length=i),e.applyFromCharCode(u)}(t=e.transformTo(n.uint8array?"uint8array":"array",t))},e.inherits(f,s),f.prototype.processChunk=function(t){var r=e.transformTo(n.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var o=r;(r=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),r.set(o,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var s=function(t,r){var i;for((r=r||t.length)>t.length&&(r=t.length),i=r-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?r:i+a[t[i]]>r?i:r}(r),u=r;s!==r.length&&(n.uint8array?(u=r.subarray(0,s),this.leftOver=r.subarray(s,r.length)):(u=r.slice(0,s),this.leftOver=r.slice(s,r.length))),this.push({data:i.utf8decode(u),meta:t.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,e.inherits(c,s),c.prototype.processChunk=function(t){this.push({data:i.utf8encode(t.data),meta:t.meta})},i.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var e=t("./support"),n=t("./base64"),o=t("./nodejsUtils"),s=t("./external");function a(t){return t}function u(t,r){for(var i=0;i<t.length;++i)r[i]=255&t.charCodeAt(i);return r}t("setimmediate"),i.newBlob=function(t,r){i.checkSupport("blob");try{return new Blob([t],{type:r})}catch(i){try{var e=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return e.append(t),e.getBlob(r)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(t,r,i){var e=[],n=0,o=t.length;if(o<=i)return String.fromCharCode.apply(null,t);for(;n<o;)e.push(String.fromCharCode.apply(null,"array"===r||"nodebuffer"===r?t.slice(n,Math.min(n+i,o)):t.subarray(n,Math.min(n+i,o)))),n+=i;return e.join("")},stringifyByChar:function(t){for(var r="",i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r},applyCanBeUsed:{uint8array:function(){try{return e.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return e.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var r=65536,e=i.getTypeOf(t),n=!0;if("uint8array"===e?n=f.applyCanBeUsed.uint8array:"nodebuffer"===e&&(n=f.applyCanBeUsed.nodebuffer),n)for(;1<r;)try{return f.stringifyByChunk(t,e,r)}catch(t){r=Math.floor(r/2)}return f.stringifyByChar(t)}function h(t,r){for(var i=0;i<t.length;i++)r[i]=t[i];return r}i.applyFromCharCode=c;var l={};l.string={string:a,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return l.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,o.allocBuffer(t.length))}},l.array={string:c,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},l.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},l.uint8array={string:c,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return o.newBufferFrom(t)}},l.nodebuffer={string:c,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return l.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:a},i.transformTo=function(t,r){if(r=r||"",!t)return r;i.checkSupport(t);var e=i.getTypeOf(r);return l[e][t](r)},i.resolve=function(t){for(var r=t.split("/"),i=[],e=0;e<r.length;e++){var n=r[e];"."===n||""===n&&0!==e&&e!==r.length-1||(".."===n?i.pop():i.push(n))}return i.join("/")},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":e.nodebuffer&&o.isBuffer(t)?"nodebuffer":e.uint8array&&t instanceof Uint8Array?"uint8array":e.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){if(!e[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var r,i,e="";for(i=0;i<(t||"").length;i++)e+="\\x"+((r=t.charCodeAt(i))<16?"0":"")+r.toString(16).toUpperCase();return e},i.delay=function(t,r,i){setImmediate((function(){t.apply(i||null,r||[])}))},i.inherits=function(t,r){function i(){}i.prototype=r.prototype,t.prototype=new i},i.extend=function(){var t,r,i={};for(t=0;t<arguments.length;t++)for(r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&void 0===i[r]&&(i[r]=arguments[t][r]);return i},i.prepareContent=function(t,r,o,a,f){return s.Promise.resolve(r).then((function(t){return e.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(r,i){var e=new FileReader;e.onload=function(t){r(t.target.result)},e.onerror=function(t){i(t.target.error)},e.readAsArrayBuffer(t)})):t})).then((function(r){var c=i.getTypeOf(r);return c?("arraybuffer"===c?r=i.transformTo("uint8array",r):"string"===c&&(f?r=n.decode(r):o&&!0!==a&&(r=function(t){return u(t,e.uint8array?new Uint8Array(t.length):new Array(t.length))}(r))),r):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r){var i=t("./reader/readerFor"),e=t("./utils"),n=t("./signature"),o=t("./zipEntry"),s=t("./support");function a(t){this.files=[],this.loadOptions=t}a.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+e.pretty(r)+", expected "+e.pretty(t)+")")}},isSignature:function(t,r){var i=this.reader.index;this.reader.setIndex(t);var e=this.reader.readString(4)===r;return this.reader.setIndex(i),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),r=e.transformTo(s.uint8array?"uint8array":"array",t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,r,i,e=this.zip64EndOfCentralSize-44;0<e;)t=this.reader.readInt(2),r=this.reader.readInt(4),i=this.reader.readData(r),this.zip64ExtensibleData[t]={id:t,length:r,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,r;for(t=0;t<this.files.length;t++)this.reader.setIndex((r=this.files[t]).localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var r=t;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===e.MAX_VALUE_16BITS||this.diskWithCentralDirStart===e.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===e.MAX_VALUE_16BITS||this.centralDirRecords===e.MAX_VALUE_16BITS||this.centralDirSize===e.MAX_VALUE_32BITS||this.centralDirOffset===e.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var o=r-i;if(0<o)this.isSignature(r,n.CENTRAL_FILE_HEADER)||(this.reader.zero=o);else if(o<0)throw new Error("Corrupted zip: missing "+Math.abs(o)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=a},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r){var i=t("./reader/readerFor"),e=t("./utils"),n=t("./compressedObject"),o=t("./crc32"),s=t("./utf8"),a=t("./compressions"),u=t("./support");function f(t,r){this.options=t,this.loadOptions=r}f.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var r,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(r=function(t){for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&a[r].magic===t)return a[r];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+e.pretty(this.compressionMethod)+" unknown (inner file : "+e.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,r,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var r=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(r),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===e.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===e.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===e.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===e.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var r,i,e,n=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<n;)r=t.readInt(2),i=t.readInt(2),e=t.readData(i),this.extraFields[r]={id:r,length:i,value:e};t.setIndex(n)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var r=this.findExtraFieldUnicodePath();if(null!==r)this.fileNameStr=r;else{var i=e.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=e.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var r=i(t.value);return 1!==r.readInt(1)||o(this.fileName)!==r.readInt(4)?null:s.utf8decode(r.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var r=i(t.value);return 1!==r.readInt(1)||o(this.fileComment)!==r.readInt(4)?null:s.utf8decode(r.readData(t.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r){function i(t,r,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=r,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var e=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),o=t("./utf8"),s=t("./compressedObject"),a=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var r=null,i="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(i=t.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),r=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(r=r.pipe(new o.Utf8EncodeWorker)),!s&&n&&(r=r.pipe(new o.Utf8DecodeWorker))}catch(t){(r=new a("error")).error(t)}return new e(r,i,"")},async:function(t,r){return this.internalStream(t).accumulate(r)},nodeStream:function(t,r){return this.internalStream(t||"nodebuffer").toNodejsStream(r)},_compressWorker:function(t,r){if(this._data instanceof s&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(i,t,r)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof a?this._data:new n(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<u.length;c++)i.prototype[u[c]]=f;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r){(function(t){var i,e,n=t.MutationObserver||t.WebKitMutationObserver;if(n){var o=0,s=new n(c),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),i=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var r=t.document.createElement("script");r.onreadystatechange=function(){c(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},t.document.documentElement.appendChild(r)}:function(){setTimeout(c,0)};else{var u=new t.MessageChannel;u.port1.onmessage=c,i=function(){u.port2.postMessage(0)}}var f=[];function c(){var t,r;e=!0;for(var i=f.length;i;){for(r=f,f=[],t=-1;++t<i;)r[t]();i=f.length}e=!1}r.exports=function(t){1!==f.push(t)||e||i()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,r){var i=t("immediate");function e(){}var n={},o=["REJECTED"],s=["FULFILLED"],a=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,t!==e&&l(this,t)}function f(t,r,i){this.promise=t,"function"==typeof r&&(this.onFulfilled=r,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function c(t,r,e){i((function(){var i;try{i=r(e)}catch(i){return n.reject(t,i)}i===t?n.reject(t,new TypeError("Cannot resolve promise with itself")):n.resolve(t,i)}))}function h(t){var r=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof r)return function(){r.apply(t,arguments)}}function l(t,r){var i=!1;function e(r){i||(i=!0,n.reject(t,r))}function o(r){i||(i=!0,n.resolve(t,r))}var s=d((function(){r(o,e)}));"error"===s.status&&e(s.value)}function d(t,r){var i={};try{i.value=t(r),i.status="success"}catch(t){i.status="error",i.value=t}return i}(r.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var r=this.constructor;return this.then((function(i){return r.resolve(t()).then((function(){return i}))}),(function(i){return r.resolve(t()).then((function(){throw i}))}))},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,r){if("function"!=typeof t&&this.state===s||"function"!=typeof r&&this.state===o)return this;var i=new this.constructor(e);return this.state!==a?c(i,this.state===s?t:r,this.outcome):this.queue.push(new f(i,t,r)),i},f.prototype.callFulfilled=function(t){n.resolve(this.promise,t)},f.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},f.prototype.callRejected=function(t){n.reject(this.promise,t)},f.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},n.resolve=function(t,r){var i=d(h,r);if("error"===i.status)return n.reject(t,i.value);var e=i.value;if(e)l(t,e);else{t.state=s,t.outcome=r;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(r)}return t},n.reject=function(t,r){t.state=o,t.outcome=r;for(var i=-1,e=t.queue.length;++i<e;)t.queue[i].callRejected(r);return t},u.resolve=function(t){return t instanceof this?t:n.resolve(new this(e),t)},u.reject=function(t){var r=new this(e);return n.reject(r,t)},u.all=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,u=-1,f=new this(e);++u<i;)c(t[u],u);return f;function c(t,e){r.resolve(t).then((function(t){s[e]=t,++a!==i||o||(o=!0,n.resolve(f,s))}),(function(t){o||(o=!0,n.reject(f,t))}))}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,i=!1;if(!r)return this.resolve([]);for(var o=-1,s=new this(e);++o<r;)this.resolve(t[o]).then((function(t){i||(i=!0,n.resolve(s,t))}),(function(t){i||(i=!0,n.reject(s,t))}));return s}},{immediate:36}],38:[function(t,r){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var e=t("./zlib/deflate"),n=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),u=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var r=this.options;r.raw&&0<r.windowBits?r.windowBits=-r.windowBits:r.gzip&&0<r.windowBits&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=e.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(0!==i)throw new Error(s[i]);if(r.header&&e.deflateSetHeader(this.strm,r.header),r.dictionary){var c;if(c="string"==typeof r.dictionary?o.string2buf(r.dictionary):"[object ArrayBuffer]"===u.call(r.dictionary)?new Uint8Array(r.dictionary):r.dictionary,0!==(i=e.deflateSetDictionary(this.strm,c)))throw new Error(s[i]);this._dict_set=!0}}function c(t,r){var i=new f(r);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}f.prototype.push=function(t,r){var i,s,a=this.strm,f=this.options.chunkSize;if(this.ended)return!1;s=r===~~r?r:!0===r?4:0,a.input="string"==typeof t?o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?new Uint8Array(t):t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new n.Buf8(f),a.next_out=0,a.avail_out=f),1!==(i=e.deflate(a,s))&&0!==i)return this.onEnd(i),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||this.onData("string"===this.options.to?o.buf2binstring(n.shrinkBuf(a.output,a.next_out)):n.shrinkBuf(a.output,a.next_out))}while((0<a.avail_in||0===a.avail_out)&&1!==i);return 4===s?(i=e.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),!(a.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){0===t&&(this.result="string"===this.options.to?this.chunks.join(""):n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=f,i.deflate=c,i.deflateRaw=function(t,r){return(r=r||{}).raw=!0,c(t,r)},i.gzip=function(t,r){return(r=r||{}).gzip=!0,c(t,r)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var e=t("./zlib/inflate"),n=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},t||{});var r=this.options;r.raw&&0<=r.windowBits&&r.windowBits<16&&(r.windowBits=-r.windowBits,0===r.windowBits&&(r.windowBits=-15)),!(0<=r.windowBits&&r.windowBits<16)||t&&t.windowBits||(r.windowBits+=32),15<r.windowBits&&r.windowBits<48&&0==(15&r.windowBits)&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var i=e.inflateInit2(this.strm,r.windowBits);if(i!==s.Z_OK)throw new Error(a[i]);this.header=new f,e.inflateGetHeader(this.strm,this.header)}function l(t,r){var i=new h(r);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}h.prototype.push=function(t,r){var i,a,u,f,h,l,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;a=r===~~r?r:!0===r?s.Z_FINISH:s.Z_NO_FLUSH,d.input="string"==typeof t?o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?new Uint8Array(t):t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new n.Buf8(p),d.next_out=0,d.avail_out=p),(i=e.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&m&&(l="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,i=e.inflateSetDictionary(this.strm,l)),i===s.Z_BUF_ERROR&&!0===v&&(i=s.Z_OK,v=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&i!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(d.output,d.next_out),f=d.next_out-u,h=o.buf2string(d.output,u),d.next_out=f,d.avail_out=p-f,f&&n.arraySet(d.output,d.output,u,f,0),this.onData(h)):this.onData(n.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(v=!0)}while((0<d.avail_in||0===d.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(i=e.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(d.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=h,i.inflate=l,i.inflateRaw=function(t,r){return(r=r||{}).raw=!0,l(t,r)},i.ungzip=l},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var i=r.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])}}return t},i.shrinkBuf=function(t,r){return t.length===r?t:t.subarray?t.subarray(0,r):(t.length=r,t)};var n={arraySet:function(t,r,i,e,n){if(r.subarray&&t.subarray)t.set(r.subarray(i,i+e),n);else for(var o=0;o<e;o++)t[n+o]=r[i+o]},flattenChunks:function(t){var r,i,e,n,o,s;for(r=e=0,i=t.length;r<i;r++)e+=t[r].length;for(s=new Uint8Array(e),r=n=0,i=t.length;r<i;r++)s.set(o=t[r],n),n+=o.length;return s}},o={arraySet:function(t,r,i,e,n){for(var o=0;o<e;o++)t[n+o]=r[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(e)},{}],42:[function(t,r,i){var e=t("./common"),n=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new e.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(t,r){if(r<65537&&(t.subarray&&o||!t.subarray&&n))return String.fromCharCode.apply(null,e.shrinkBuf(t,r));for(var i="",s=0;s<r;s++)i+=String.fromCharCode(t[s]);return i}s[254]=s[254]=1,i.string2buf=function(t){var r,i,n,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),u+=i<128?1:i<2048?2:i<65536?3:4;for(r=new e.Buf8(u),o=s=0;s<u;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),i<128?r[s++]=i:(i<2048?r[s++]=192|i>>>6:(i<65536?r[s++]=224|i>>>12:(r[s++]=240|i>>>18,r[s++]=128|i>>>12&63),r[s++]=128|i>>>6&63),r[s++]=128|63&i);return r},i.buf2binstring=function(t){return u(t,t.length)},i.binstring2buf=function(t){for(var r=new e.Buf8(t.length),i=0,n=r.length;i<n;i++)r[i]=t.charCodeAt(i);return r},i.buf2string=function(t,r){var i,e,n,o,a=r||t.length,f=new Array(2*a);for(i=e=0;i<a;)if((n=t[i++])<128)f[e++]=n;else if(4<(o=s[n]))f[e++]=65533,i+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&i<a;)n=n<<6|63&t[i++],o--;1<o?f[e++]=65533:n<65536?f[e++]=n:(f[e++]=55296|(n-=65536)>>10&1023,f[e++]=56320|1023&n)}return u(f,e)},i.utf8border=function(t,r){var i;for((r=r||t.length)>t.length&&(r=t.length),i=r-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?r:i+s[t[i]]>r?i:r}},{"./common":41}],43:[function(t,r){r.exports=function(t,r,i,e){for(var n=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){for(i-=s=2e3<i?2e3:i;o=o+(n=n+r[e++]|0)|0,--s;);n%=65521,o%=65521}return n|o<<16|0}},{}],44:[function(t,r){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r){var i=function(){for(var t,r=[],i=0;i<256;i++){t=i;for(var e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;r[i]=t}return r}();r.exports=function(t,r,e,n){var o=i,s=n+e;t^=-1;for(var a=n;a<s;a++)t=t>>>8^o[255&(t^r[a])];return-1^t}},{}],46:[function(t,r,i){var e,n=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),u=t("./messages"),f=-2,c=258,h=262,l=113;function d(t,r){return t.msg=u[r],r}function p(t){return(t<<1)-(4<t?9:0)}function m(t){for(var r=t.length;0<=--r;)t[r]=0}function v(t){var r=t.state,i=r.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(n.arraySet(t.output,r.pending_buf,r.pending_out,i,t.next_out),t.next_out+=i,r.pending_out+=i,t.total_out+=i,t.avail_out-=i,r.pending-=i,0===r.pending&&(r.pending_out=0))}function b(t,r){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,r),t.block_start=t.strstart,v(t.strm)}function g(t,r){t.pending_buf[t.pending++]=r}function w(t,r){t.pending_buf[t.pending++]=r>>>8&255,t.pending_buf[t.pending++]=255&r}function y(t,r){var i,e,n=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-h?t.strstart-(t.w_size-h):0,f=t.window,l=t.w_mask,d=t.prev,p=t.strstart+c,m=f[o+s-1],v=f[o+s];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do{if(f[(i=r)+s]===v&&f[i+s-1]===m&&f[i]===f[o]&&f[++i]===f[o+1]){o+=2,i++;do{}while(f[++o]===f[++i]&&f[++o]===f[++i]&&f[++o]===f[++i]&&f[++o]===f[++i]&&f[++o]===f[++i]&&f[++o]===f[++i]&&f[++o]===f[++i]&&f[++o]===f[++i]&&o<p);if(e=c-(p-o),o=p-c,s<e){if(t.match_start=r,a<=(s=e))break;m=f[o+s-1],v=f[o+s]}}}while((r=d[r&l])>u&&0!=--n);return s<=t.lookahead?s:t.lookahead}function k(t){var r,i,e,o,u,f,c,l,d,p,m=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=m+(m-h)){for(n.arraySet(t.window,t.window,m,m,0),t.match_start-=m,t.strstart-=m,t.block_start-=m,r=i=t.hash_size;e=t.head[--r],t.head[r]=m<=e?e-m:0,--i;);for(r=i=m;e=t.prev[--r],t.prev[r]=m<=e?e-m:0,--i;);o+=m}if(0===t.strm.avail_in)break;if(c=t.window,l=t.strstart+t.lookahead,p=void 0,(d=o)<(p=(f=t.strm).avail_in)&&(p=d),i=0===p?0:(f.avail_in-=p,n.arraySet(c,f.input,f.next_in,p,l),1===f.state.wrap?f.adler=s(f.adler,c,p,l):2===f.state.wrap&&(f.adler=a(f.adler,c,p,l)),f.next_in+=p,f.total_in+=p,p),t.lookahead+=i,t.lookahead+t.insert>=3)for(t.ins_h=t.window[u=t.strstart-t.insert],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<h&&0!==t.strm.avail_in)}function x(t,r){for(var i,e;;){if(t.lookahead<h){if(k(t),t.lookahead<h&&0===r)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-h&&(t.match_length=y(t,i)),t.match_length>=3)if(e=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else e=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(e&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===r?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}function S(t,r){for(var i,e,n;;){if(t.lookahead<h){if(k(t),t.lookahead<h&&0===r)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-h&&(t.match_length=y(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-3,e=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,e&&(b(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((e=o._tr_tally(t,0,t.window[t.strstart-1]))&&b(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(e=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===r?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}function A(t,r,i,e,n){this.good_length=t,this.max_lazy=r,this.nice_length=i,this.max_chain=e,this.func=n}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function j(t){var r;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(r=t.state).pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap?42:l,t.adler=2===r.wrap?0:1,r.last_flush=0,o._tr_init(r),0):d(t,f)}function R(t){var r=j(t);return 0===r&&function(t){t.window_size=2*t.w_size,m(t.head),t.max_lazy_match=e[t.level].max_lazy,t.good_match=e[t.level].good_length,t.nice_match=e[t.level].nice_length,t.max_chain_length=e[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),r}function O(t,r,i,e,o,s){if(!t)return f;var a=1;if(-1===r&&(r=6),e<0?(a=0,e=-e):15<e&&(a=2,e-=16),o<1||9<o||8!==i||e<8||15<e||r<0||9<r||s<0||4<s)return d(t,f);8===e&&(e=9);var u=new E;return(t.state=u).strm=t,u.wrap=a,u.gzhead=null,u.w_bits=e,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new n.Buf8(2*u.w_size),u.head=new n.Buf16(u.hash_size),u.prev=new n.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new n.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=r,u.strategy=s,u.method=i,R(t)}e=[new A(0,0,0,0,(function(t,r){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(k(t),0===t.lookahead&&0===r)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var e=t.block_start+i;if((0===t.strstart||t.strstart>=e)&&(t.lookahead=t.strstart-e,t.strstart=e,b(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-h&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===r?(b(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&b(t,!1),1)})),new A(4,4,8,4,x),new A(4,5,16,8,x),new A(4,6,32,32,x),new A(4,4,16,16,S),new A(8,16,32,32,S),new A(8,16,128,128,S),new A(8,32,128,256,S),new A(32,128,258,1024,S),new A(32,258,258,4096,S)],i.deflateInit=function(t,r){return O(t,r,8,15,8,0)},i.deflateInit2=O,i.deflateReset=R,i.deflateResetKeep=j,i.deflateSetHeader=function(t,r){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=r,0):f},i.deflate=function(t,r){var i,n,s,u;if(!t||!t.state||5<r||r<0)return t?d(t,f):f;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||666===n.status&&4!==r)return d(t,0===t.avail_out?-5:f);if(n.strm=t,i=n.last_flush,n.last_flush=r,42===n.status)if(2===n.wrap)t.adler=0,g(n,31),g(n,139),g(n,8),n.gzhead?(g(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),g(n,255&n.gzhead.time),g(n,n.gzhead.time>>8&255),g(n,n.gzhead.time>>16&255),g(n,n.gzhead.time>>24&255),g(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),g(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(g(n,255&n.gzhead.extra.length),g(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=a(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(g(n,0),g(n,0),g(n,0),g(n,0),g(n,0),g(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),g(n,3),n.status=l);else{var h=8+(n.w_bits-8<<4)<<8;h|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(h|=32),h+=31-h%31,n.status=l,w(n,h),0!==n.strstart&&(w(n,t.adler>>>16),w(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>s&&(t.adler=a(t.adler,n.pending_buf,n.pending-s,s)),v(t),s=n.pending,n.pending!==n.pending_buf_size));)g(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(t.adler=a(t.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(t.adler=a(t.adler,n.pending_buf,n.pending-s,s)),v(t),s=n.pending,n.pending===n.pending_buf_size)){u=1;break}u=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,g(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>s&&(t.adler=a(t.adler,n.pending_buf,n.pending-s,s)),0===u&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(t.adler=a(t.adler,n.pending_buf,n.pending-s,s)),v(t),s=n.pending,n.pending===n.pending_buf_size)){u=1;break}u=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,g(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>s&&(t.adler=a(t.adler,n.pending_buf,n.pending-s,s)),0===u&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&v(t),n.pending+2<=n.pending_buf_size&&(g(n,255&t.adler),g(n,t.adler>>8&255),t.adler=0,n.status=l)):n.status=l),0!==n.pending){if(v(t),0===t.avail_out)return n.last_flush=-1,0}else if(0===t.avail_in&&p(r)<=p(i)&&4!==r)return d(t,-5);if(666===n.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==n.lookahead||0!==r&&666!==n.status){var y=2===n.strategy?function(t,r){for(var i;;){if(0===t.lookahead&&(k(t),0===t.lookahead)){if(0===r)return 1;break}if(t.match_length=0,i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===r?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}(n,r):3===n.strategy?function(t,r){for(var i,e,n,s,a=t.window;;){if(t.lookahead<=c){if(k(t),t.lookahead<=c&&0===r)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(e=a[n=t.strstart-1])===a[++n]&&e===a[++n]&&e===a[++n]){s=t.strstart+c;do{}while(e===a[++n]&&e===a[++n]&&e===a[++n]&&e===a[++n]&&e===a[++n]&&e===a[++n]&&e===a[++n]&&e===a[++n]&&n<s);t.match_length=c-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===r?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}(n,r):e[n.level].func(n,r);if(3!==y&&4!==y||(n.status=666),1===y||3===y)return 0===t.avail_out&&(n.last_flush=-1),0;if(2===y&&(1===r?o._tr_align(n):5!==r&&(o._tr_stored_block(n,0,0,!1),3===r&&(m(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),v(t),0===t.avail_out))return n.last_flush=-1,0}return 4!==r?0:n.wrap<=0?1:(2===n.wrap?(g(n,255&t.adler),g(n,t.adler>>8&255),g(n,t.adler>>16&255),g(n,t.adler>>24&255),g(n,255&t.total_in),g(n,t.total_in>>8&255),g(n,t.total_in>>16&255),g(n,t.total_in>>24&255)):(w(n,t.adler>>>16),w(n,65535&t.adler)),v(t),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?0:1)},i.deflateEnd=function(t){var r;return t&&t.state?42!==(r=t.state.status)&&69!==r&&73!==r&&91!==r&&103!==r&&r!==l&&666!==r?d(t,f):(t.state=null,r===l?d(t,-3):0):f},i.deflateSetDictionary=function(t,r){var i,e,o,a,u,c,h,l,d=r.length;if(!t||!t.state)return f;if(2===(a=(i=t.state).wrap)||1===a&&42!==i.status||i.lookahead)return f;for(1===a&&(t.adler=s(t.adler,r,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(m(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new n.Buf8(i.w_size),n.arraySet(l,r,d-i.w_size,i.w_size,0),r=l,d=i.w_size),u=t.avail_in,c=t.next_in,h=t.input,t.avail_in=d,t.next_in=0,t.input=r,k(i);i.lookahead>=3;){for(e=i.strstart,o=i.lookahead-2;i.ins_h=(i.ins_h<<i.hash_shift^i.window[e+3-1])&i.hash_mask,i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++,--o;);i.strstart=e,i.lookahead=2,k(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=c,t.input=h,t.avail_in=u,i.wrap=a,0},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r){r.exports=function(t,r){var i,e,n,o,s,a,u,f,c,h,l,d,p,m,v,b,g,w,y,k,x,S,A,E,j;E=t.input,n=(e=t.next_in)+(t.avail_in-5),j=t.output,s=(o=t.next_out)-(r-t.avail_out),a=o+(t.avail_out-257),u=(i=t.state).dmax,f=i.wsize,c=i.whave,h=i.wnext,l=i.window,d=i.hold,p=i.bits,m=i.lencode,v=i.distcode,b=(1<<i.lenbits)-1,g=(1<<i.distbits)-1;t:do{p<15&&(d+=E[e++]<<p,d+=E[e++]<<(p+=8),p+=8),w=m[d&b];r:for(;;){if(d>>>=y=w>>>24,p-=y,0==(y=w>>>16&255))j[o++]=65535&w;else{if(!(16&y)){if(0==(64&y)){w=m[(65535&w)+(d&(1<<y)-1)];continue r}if(32&y){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}k=65535&w,(y&=15)&&(p<y&&(d+=E[e++]<<p,p+=8),k+=d&(1<<y)-1,d>>>=y,p-=y),p<15&&(d+=E[e++]<<p,d+=E[e++]<<(p+=8),p+=8),w=v[d&g];i:for(;;){if(d>>>=y=w>>>24,p-=y,!(16&(y=w>>>16&255))){if(0==(64&y)){w=v[(65535&w)+(d&(1<<y)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&w,p<(y&=15)&&(d+=E[e++]<<p,(p+=8)<y&&(d+=E[e++]<<p,p+=8)),u<(x+=d&(1<<y)-1)){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=y,p-=y,(y=o-s)<x){if(c<(y=x-y)&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(A=l,(S=0)===h){if(S+=f-y,y<k){for(k-=y;j[o++]=l[S++],--y;);S=o-x,A=j}}else if(h<y){if(S+=f+h-y,(y-=h)<k){for(k-=y;j[o++]=l[S++],--y;);if(S=0,h<k){for(k-=y=h;j[o++]=l[S++],--y;);S=o-x,A=j}}}else if(S+=h-y,y<k){for(k-=y;j[o++]=l[S++],--y;);S=o-x,A=j}for(;2<k;)j[o++]=A[S++],j[o++]=A[S++],j[o++]=A[S++],k-=3;k&&(j[o++]=A[S++],1<k&&(j[o++]=A[S++]))}else{for(S=o-x;j[o++]=j[S++],j[o++]=j[S++],j[o++]=j[S++],2<(k-=3););k&&(j[o++]=j[S++],1<k&&(j[o++]=j[S++]))}break}}break}}while(e<n&&o<a);e-=k=p>>3,d&=(1<<(p-=k<<3))-1,t.next_in=e,t.next_out=o,t.avail_in=e<n?n-e+5:5-(e-n),t.avail_out=o<a?a-o+257:257-(o-a),i.hold=d,i.bits=p}},{}],49:[function(t,r,i){var e=t("../utils/common"),n=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),u=-2;function f(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(t){var r;return t&&t.state?(t.total_in=t.total_out=(r=t.state).total=0,t.msg="",r.wrap&&(t.adler=1&r.wrap),r.mode=1,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new e.Buf32(852),r.distcode=r.distdyn=new e.Buf32(592),r.sane=1,r.back=-1,0):u}function l(t){var r;return t&&t.state?((r=t.state).wsize=0,r.whave=0,r.wnext=0,h(t)):u}function d(t,r){var i,e;return t&&t.state?(e=t.state,r<0?(i=0,r=-r):(i=1+(r>>4),r<48&&(r&=15)),r&&(r<8||15<r)?u:(null!==e.window&&e.wbits!==r&&(e.window=null),e.wrap=i,e.wbits=r,l(t))):u}function p(t,r){var i,e;return t?(e=new c,(t.state=e).window=null,0!==(i=d(t,r))&&(t.state=null),i):u}var m,v,b=!0;function g(t){if(b){var r;for(m=new e.Buf32(512),v=new e.Buf32(32),r=0;r<144;)t.lens[r++]=8;for(;r<256;)t.lens[r++]=9;for(;r<280;)t.lens[r++]=7;for(;r<288;)t.lens[r++]=8;for(a(1,t.lens,0,288,m,0,t.work,{bits:9}),r=0;r<32;)t.lens[r++]=5;a(2,t.lens,0,32,v,0,t.work,{bits:5}),b=!1}t.lencode=m,t.lenbits=9,t.distcode=v,t.distbits=5}function w(t,r,i,n){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new e.Buf8(s.wsize)),n>=s.wsize?(e.arraySet(s.window,r,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n<(o=s.wsize-s.wnext)&&(o=n),e.arraySet(s.window,r,i-n,o,s.wnext),(n-=o)?(e.arraySet(s.window,r,i-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}i.inflateReset=l,i.inflateReset2=d,i.inflateResetKeep=h,i.inflateInit=function(t){return p(t,15)},i.inflateInit2=p,i.inflate=function(t,r){var i,c,h,l,d,p,m,v,b,y,k,x,S,A,E,j,R,O,_,z,I,P,U,N,T=0,F=new e.Buf8(4),C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;12===(i=t.state).mode&&(i.mode=13),d=t.next_out,h=t.output,l=t.next_in,c=t.input,v=i.hold,b=i.bits,y=p=t.avail_in,k=m=t.avail_out,P=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;b<16;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(2&i.wrap&&35615===v){F[i.check=0]=255&v,F[1]=v>>>8&255,i.check=o(i.check,F,2,0),b=v=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&v)){t.msg="unknown compression method",i.mode=30;break}if(b-=4,I=8+(15&(v>>>=4)),0===i.wbits)i.wbits=I;else if(I>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<I,t.adler=i.check=1,i.mode=512&v?10:12,b=v=0;break;case 2:for(;b<16;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(i.flags=v,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=v>>8&1),512&i.flags&&(F[0]=255&v,F[1]=v>>>8&255,i.check=o(i.check,F,2,0)),b=v=0,i.mode=3;case 3:for(;b<32;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}i.head&&(i.head.time=v),512&i.flags&&(F[0]=255&v,F[1]=v>>>8&255,F[2]=v>>>16&255,F[3]=v>>>24&255,i.check=o(i.check,F,4,0)),b=v=0,i.mode=4;case 4:for(;b<16;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}i.head&&(i.head.xflags=255&v,i.head.os=v>>8),512&i.flags&&(F[0]=255&v,F[1]=v>>>8&255,i.check=o(i.check,F,2,0)),b=v=0,i.mode=5;case 5:if(1024&i.flags){for(;b<16;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}i.length=v,i.head&&(i.head.extra_len=v),512&i.flags&&(F[0]=255&v,F[1]=v>>>8&255,i.check=o(i.check,F,2,0)),b=v=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(p<(x=i.length)&&(x=p),x&&(i.head&&(I=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),e.arraySet(i.head.extra,c,l,x,I)),512&i.flags&&(i.check=o(i.check,c,x,l)),p-=x,l+=x,i.length-=x),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===p)break t;for(x=0;I=c[l+x++],i.head&&I&&i.length<65536&&(i.head.name+=String.fromCharCode(I)),I&&x<p;);if(512&i.flags&&(i.check=o(i.check,c,x,l)),p-=x,l+=x,I)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===p)break t;for(x=0;I=c[l+x++],i.head&&I&&i.length<65536&&(i.head.comment+=String.fromCharCode(I)),I&&x<p;);if(512&i.flags&&(i.check=o(i.check,c,x,l)),p-=x,l+=x,I)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;b<16;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(v!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}b=v=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;b<32;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}t.adler=i.check=f(v),b=v=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=d,t.avail_out=m,t.next_in=l,t.avail_in=p,i.hold=v,i.bits=b,2;t.adler=i.check=1,i.mode=12;case 12:if(5===r||6===r)break t;case 13:if(i.last){v>>>=7&b,b-=7&b,i.mode=27;break}for(;b<3;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}switch(i.last=1&v,b-=1,3&(v>>>=1)){case 0:i.mode=14;break;case 1:if(g(i),i.mode=20,6!==r)break;v>>>=2,b-=2;break t;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}v>>>=2,b-=2;break;case 14:for(v>>>=7&b,b-=7&b;b<32;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&v,b=v=0,i.mode=15,6===r)break t;case 15:i.mode=16;case 16:if(x=i.length){if(p<x&&(x=p),m<x&&(x=m),0===x)break t;e.arraySet(h,c,l,x,d),p-=x,l+=x,m-=x,d+=x,i.length-=x;break}i.mode=12;break;case 17:for(;b<14;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(i.nlen=257+(31&v),b-=5,i.ndist=1+(31&(v>>>=5)),b-=5,i.ncode=4+(15&(v>>>=5)),v>>>=4,b-=4,286<i.nlen||30<i.ndist){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;b<3;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}i.lens[C[i.have++]]=7&v,v>>>=3,b-=3}for(;i.have<19;)i.lens[C[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,P=a(0,i.lens,0,19,i.lencode,0,i.work,U={bits:i.lenbits}),i.lenbits=U.bits,P){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;j=(T=i.lencode[v&(1<<i.lenbits)-1])>>>16&255,R=65535&T,!((E=T>>>24)<=b);){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(R<16)v>>>=E,b-=E,i.lens[i.have++]=R;else{if(16===R){for(N=E+2;b<N;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(v>>>=E,b-=E,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}I=i.lens[i.have-1],x=3+(3&v),v>>>=2,b-=2}else if(17===R){for(N=E+3;b<N;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}b-=E,I=0,x=3+(7&(v>>>=E)),v>>>=3,b-=3}else{for(N=E+7;b<N;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}b-=E,I=0,x=11+(127&(v>>>=E)),v>>>=7,b-=7}if(i.have+x>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;x--;)i.lens[i.have++]=I}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,P=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,U={bits:i.lenbits}),i.lenbits=U.bits,P){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,P=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,U={bits:i.distbits}),i.distbits=U.bits,P){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===r)break t;case 20:i.mode=21;case 21:if(6<=p&&258<=m){t.next_out=d,t.avail_out=m,t.next_in=l,t.avail_in=p,i.hold=v,i.bits=b,s(t,k),d=t.next_out,h=t.output,m=t.avail_out,l=t.next_in,c=t.input,p=t.avail_in,v=i.hold,b=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;j=(T=i.lencode[v&(1<<i.lenbits)-1])>>>16&255,R=65535&T,!((E=T>>>24)<=b);){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(j&&0==(240&j)){for(O=E,_=j,z=R;j=(T=i.lencode[z+((v&(1<<O+_)-1)>>O)])>>>16&255,R=65535&T,!(O+(E=T>>>24)<=b);){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}v>>>=O,b-=O,i.back+=O}if(v>>>=E,b-=E,i.back+=E,i.length=R,0===j){i.mode=26;break}if(32&j){i.back=-1,i.mode=12;break}if(64&j){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&j,i.mode=22;case 22:if(i.extra){for(N=i.extra;b<N;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}i.length+=v&(1<<i.extra)-1,v>>>=i.extra,b-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;j=(T=i.distcode[v&(1<<i.distbits)-1])>>>16&255,R=65535&T,!((E=T>>>24)<=b);){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(0==(240&j)){for(O=E,_=j,z=R;j=(T=i.distcode[z+((v&(1<<O+_)-1)>>O)])>>>16&255,R=65535&T,!(O+(E=T>>>24)<=b);){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}v>>>=O,b-=O,i.back+=O}if(v>>>=E,b-=E,i.back+=E,64&j){t.msg="invalid distance code",i.mode=30;break}i.offset=R,i.extra=15&j,i.mode=24;case 24:if(i.extra){for(N=i.extra;b<N;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}i.offset+=v&(1<<i.extra)-1,v>>>=i.extra,b-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===m)break t;if(i.offset>(x=k-m)){if((x=i.offset-x)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}S=x>i.wnext?i.wsize-(x-=i.wnext):i.wnext-x,x>i.length&&(x=i.length),A=i.window}else A=h,S=d-i.offset,x=i.length;for(m<x&&(x=m),m-=x,i.length-=x;h[d++]=A[S++],--x;);0===i.length&&(i.mode=21);break;case 26:if(0===m)break t;h[d++]=i.length,m--,i.mode=21;break;case 27:if(i.wrap){for(;b<32;){if(0===p)break t;p--,v|=c[l++]<<b,b+=8}if(t.total_out+=k-=m,i.total+=k,k&&(t.adler=i.check=i.flags?o(i.check,h,k,d-k):n(i.check,h,k,d-k)),k=m,(i.flags?v:f(v))!==i.check){t.msg="incorrect data check",i.mode=30;break}b=v=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;b<32;){if(0===p)break t;p--,v+=c[l++]<<b,b+=8}if(v!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}b=v=0}i.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;default:return u}return t.next_out=d,t.avail_out=m,t.next_in=l,t.avail_in=p,i.hold=v,i.bits=b,(i.wsize||k!==t.avail_out&&i.mode<30&&(i.mode<27||4!==r))&&w(t,t.output,t.next_out,k-t.avail_out)?(i.mode=31,-4):(k-=t.avail_out,t.total_in+=y-=t.avail_in,t.total_out+=k,i.total+=k,i.wrap&&k&&(t.adler=i.check=i.flags?o(i.check,h,k,t.next_out-k):n(i.check,h,k,t.next_out-k)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==y&&0===k||4===r)&&0===P&&(P=-5),P)},i.inflateEnd=function(t){if(!t||!t.state)return u;var r=t.state;return r.window&&(r.window=null),t.state=null,0},i.inflateGetHeader=function(t,r){var i;return t&&t.state?0==(2&(i=t.state).wrap)?u:((i.head=r).done=!1,0):u},i.inflateSetDictionary=function(t,r){var i,e=r.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?u:11===i.mode&&n(1,r,e,0)!==i.check?-3:w(t,r,e,e)?(i.mode=31,-4):(i.havedict=1,0):u},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r){var i=t("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(t,r,a,u,f,c,h,l){var d,p,m,v,b,g,w,y,k,x=l.bits,S=0,A=0,E=0,j=0,R=0,O=0,_=0,z=0,I=0,P=0,U=null,N=0,T=new i.Buf16(16),F=new i.Buf16(16),C=null,D=0;for(S=0;S<=15;S++)T[S]=0;for(A=0;A<u;A++)T[r[a+A]]++;for(R=x,j=15;1<=j&&0===T[j];j--);if(j<R&&(R=j),0===j)return f[c++]=20971520,f[c++]=20971520,l.bits=1,0;for(E=1;E<j&&0===T[E];E++);for(R<E&&(R=E),S=z=1;S<=15;S++)if(z<<=1,(z-=T[S])<0)return-1;if(0<z&&(0===t||1!==j))return-1;for(F[1]=0,S=1;S<15;S++)F[S+1]=F[S]+T[S];for(A=0;A<u;A++)0!==r[a+A]&&(h[F[r[a+A]]++]=A);if(g=0===t?(U=C=h,19):1===t?(U=e,N-=257,C=n,D-=257,256):(U=o,C=s,-1),S=E,b=c,_=A=P=0,m=-1,v=(I=1<<(O=R))-1,1===t&&852<I||2===t&&592<I)return 1;for(;;){for(w=S-_,k=h[A]<g?(y=0,h[A]):h[A]>g?(y=C[D+h[A]],U[N+h[A]]):(y=96,0),d=1<<S-_,E=p=1<<O;f[b+(P>>_)+(p-=d)]=w<<24|y<<16|k|0,0!==p;);for(d=1<<S-1;P&d;)d>>=1;if(0!==d?(P&=d-1,P+=d):P=0,A++,0==--T[S]){if(S===j)break;S=r[a+h[A]]}if(R<S&&(P&v)!==m){for(0===_&&(_=R),b+=E,z=1<<(O=S-_);O+_<j&&!((z-=T[O+_])<=0);)O++,z<<=1;if(I+=1<<O,1===t&&852<I||2===t&&592<I)return 1;f[m=P&v]=R<<24|O<<16|b-c|0}}return 0!==P&&(f[b+P]=S-_<<24|64<<16|0),l.bits=R,0}},{"../utils/common":41}],51:[function(t,r){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var e=t("../utils/common");function n(t){for(var r=t.length;0<=--r;)t[r]=0}var o=256,s=286,a=30,u=15,f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);n(d);var p=new Array(60);n(p);var m=new Array(512);n(m);var v=new Array(256);n(v);var b=new Array(29);n(b);var g,w,y,k=new Array(a);function x(t,r,i,e,n){this.static_tree=t,this.extra_bits=r,this.extra_base=i,this.elems=e,this.max_length=n,this.has_stree=t&&t.length}function S(t,r){this.dyn_tree=t,this.max_code=0,this.stat_desc=r}function A(t){return t<256?m[t]:m[256+(t>>>7)]}function E(t,r){t.pending_buf[t.pending++]=255&r,t.pending_buf[t.pending++]=r>>>8&255}function j(t,r,i){t.bi_valid>16-i?(t.bi_buf|=r<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=r>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=r<<t.bi_valid&65535,t.bi_valid+=i)}function R(t,r,i){j(t,i[2*r],i[2*r+1])}function O(t,r){for(var i=0;i|=1&t,t>>>=1,i<<=1,0<--r;);return i>>>1}function _(t,r,i){var e,n,o=new Array(16),s=0;for(e=1;e<=u;e++)o[e]=s=s+i[e-1]<<1;for(n=0;n<=r;n++){var a=t[2*n+1];0!==a&&(t[2*n]=O(o[a]++,a))}}function z(t){var r;for(r=0;r<s;r++)t.dyn_ltree[2*r]=0;for(r=0;r<a;r++)t.dyn_dtree[2*r]=0;for(r=0;r<19;r++)t.bl_tree[2*r]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function I(t){8<t.bi_valid?E(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,r,i,e){var n=2*r,o=2*i;return t[n]<t[o]||t[n]===t[o]&&e[r]<=e[i]}function U(t,r,i){for(var e=t.heap[i],n=i<<1;n<=t.heap_len&&(n<t.heap_len&&P(r,t.heap[n+1],t.heap[n],t.depth)&&n++,!P(r,e,t.heap[n],t.depth));)t.heap[i]=t.heap[n],i=n,n<<=1;t.heap[i]=e}function N(t,r,i){var e,n,s,a,u=0;if(0!==t.last_lit)for(;e=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],n=t.pending_buf[t.l_buf+u],u++,0===e?R(t,n,r):(R(t,(s=v[n])+o+1,r),0!==(a=f[s])&&j(t,n-=b[s],a),R(t,s=A(--e),i),0!==(a=c[s])&&j(t,e-=k[s],a)),u<t.last_lit;);R(t,256,r)}function T(t,r){var i,e,n,o=r.dyn_tree,s=r.stat_desc.static_tree,a=r.stat_desc.has_stree,f=r.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<f;i++)0!==o[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)o[2*(n=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[n]=0,t.opt_len--,a&&(t.static_len-=s[2*n+1]);for(r.max_code=c,i=t.heap_len>>1;1<=i;i--)U(t,o,i);for(n=f;i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],U(t,o,1),e=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=e,o[2*n]=o[2*i]+o[2*e],t.depth[n]=(t.depth[i]>=t.depth[e]?t.depth[i]:t.depth[e])+1,o[2*i+1]=o[2*e+1]=n,t.heap[1]=n++,U(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,r){var i,e,n,o,s,a,f=r.dyn_tree,c=r.max_code,h=r.stat_desc.static_tree,l=r.stat_desc.has_stree,d=r.stat_desc.extra_bits,p=r.stat_desc.extra_base,m=r.stat_desc.max_length,v=0;for(o=0;o<=u;o++)t.bl_count[o]=0;for(f[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)m<(o=f[2*f[2*(e=t.heap[i])+1]+1]+1)&&(o=m,v++),f[2*e+1]=o,c<e||(t.bl_count[o]++,s=0,p<=e&&(s=d[e-p]),t.opt_len+=(a=f[2*e])*(o+s),l&&(t.static_len+=a*(h[2*e+1]+s)));if(0!==v){do{for(o=m-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[m]--,v-=2}while(0<v);for(o=m;0!==o;o--)for(e=t.bl_count[o];0!==e;)c<(n=t.heap[--i])||(f[2*n+1]!==o&&(t.opt_len+=(o-f[2*n+1])*f[2*n],f[2*n+1]=o),e--)}}(t,r),_(o,c,t.bl_count)}function F(t,r,i){var e,n,o=-1,s=r[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),r[2*(i+1)+1]=65535,e=0;e<=i;e++)n=s,s=r[2*(e+1)+1],++a<u&&n===s||(a<f?t.bl_tree[2*n]+=a:0!==n?(n!==o&&t.bl_tree[2*n]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=n,f=(a=0)===s?(u=138,3):n===s?(u=6,3):(u=7,4))}function C(t,r,i){var e,n,o=-1,s=r[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),e=0;e<=i;e++)if(n=s,s=r[2*(e+1)+1],!(++a<u&&n===s)){if(a<f)for(;R(t,n,t.bl_tree),0!=--a;);else 0!==n?(n!==o&&(R(t,n,t.bl_tree),a--),R(t,16,t.bl_tree),j(t,a-3,2)):a<=10?(R(t,17,t.bl_tree),j(t,a-3,3)):(R(t,18,t.bl_tree),j(t,a-11,7));o=n,f=(a=0)===s?(u=138,3):n===s?(u=6,3):(u=7,4)}}n(k);var D=!1;function B(t,r,i,n){j(t,0+(n?1:0),3),function(t,r,i){I(t),E(t,i),E(t,~i),e.arraySet(t.pending_buf,t.window,r,i,t.pending),t.pending+=i}(t,r,i)}i._tr_init=function(t){D||(function(){var t,r,i,e,n,o=new Array(16);for(e=i=0;e<28;e++)for(b[e]=i,t=0;t<1<<f[e];t++)v[i++]=e;for(v[i-1]=e,e=n=0;e<16;e++)for(k[e]=n,t=0;t<1<<c[e];t++)m[n++]=e;for(n>>=7;e<a;e++)for(k[e]=n<<7,t=0;t<1<<c[e]-7;t++)m[256+n++]=e;for(r=0;r<=u;r++)o[r]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,o[8]++;for(;t<=255;)d[2*t+1]=9,t++,o[9]++;for(;t<=279;)d[2*t+1]=7,t++,o[7]++;for(;t<=287;)d[2*t+1]=8,t++,o[8]++;for(_(d,287,o),t=0;t<a;t++)p[2*t+1]=5,p[2*t]=O(t,5);g=new x(d,f,257,s,u),w=new x(p,c,0,a,u),y=new x(new Array(0),h,0,19,7)}(),D=!0),t.l_desc=new S(t.dyn_ltree,g),t.d_desc=new S(t.dyn_dtree,w),t.bl_desc=new S(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,z(t)},i._tr_stored_block=B,i._tr_flush_block=function(t,r,i,e){var n,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var r,i=4093624447;for(r=0;r<=31;r++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*r])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(r=32;r<o;r++)if(0!==t.dyn_ltree[2*r])return 1;return 0}(t)),T(t,t.l_desc),T(t,t.d_desc),a=function(t){var r;for(F(t,t.dyn_ltree,t.l_desc.max_code),F(t,t.dyn_dtree,t.d_desc.max_code),T(t,t.bl_desc),r=18;3<=r&&0===t.bl_tree[2*l[r]+1];r--);return t.opt_len+=3*(r+1)+5+5+4,r}(t),(s=t.static_len+3+7>>>3)<=(n=t.opt_len+3+7>>>3)&&(n=s)):n=s=i+5,i+4<=n&&-1!==r?B(t,r,i,e):4===t.strategy||s===n?(j(t,2+(e?1:0),3),N(t,d,p)):(j(t,4+(e?1:0),3),function(t,r,i,e){var n;for(j(t,r-257,5),j(t,i-1,5),j(t,e-4,4),n=0;n<e;n++)j(t,t.bl_tree[2*l[n]+1],3);C(t,t.dyn_ltree,r-1),C(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),N(t,t.dyn_ltree,t.dyn_dtree)),z(t),e&&I(t)},i._tr_tally=function(t,r,i){return t.pending_buf[t.d_buf+2*t.last_lit]=r>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&r,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===r?t.dyn_ltree[2*i]++:(t.matches++,r--,t.dyn_ltree[2*(v[i]+o+1)]++,t.dyn_dtree[2*A(r)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){j(t,2,3),R(t,256,d),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,r){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(){(function(t){!function(t){if(!t.setImmediate){var r,i,e,n,o=1,s={},a=!1,u=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,r="[object process]"==={}.toString.call(t.process)?function(t){process.nextTick((function(){h(t)}))}:function(){if(t.postMessage&&!t.importScripts){var r=!0,i=t.onmessage;return t.onmessage=function(){r=!1},t.postMessage("","*"),t.onmessage=i,r}}()?(n="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",l,!1):t.attachEvent("onmessage",l),function(r){t.postMessage(n+r,"*")}):t.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){h(t.data)},function(t){e.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(i=u.documentElement,function(t){var r=u.createElement("script");r.onreadystatechange=function(){h(t),r.onreadystatechange=null,i.removeChild(r),r=null},i.appendChild(r)}):function(t){setTimeout(h,0,t)},f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var i=new Array(arguments.length-1),e=0;e<i.length;e++)i[e]=arguments[e+1];return s[o]={callback:t,args:i},r(o),o++},f.clearImmediate=c}function c(t){delete s[t]}function h(t){if(a)setTimeout(h,0,t);else{var r=s[t];if(r){a=!0;try{!function(t){var r=t.callback,i=t.args;switch(i.length){case 0:r();break;case 1:r(i[0]);break;case 2:r(i[0],i[1]);break;case 3:r(i[0],i[1],i[2]);break;default:r.apply(undefined,i)}}(r)}finally{c(t),a=!1}}}}function l(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(n)&&h(+r.data.slice(n.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)})),A={exports:{}},E={},j={exports:{}},R={};
/*!
 * @esri/arcgis-html-sanitizer - v3.0.0 - Mon Aug 22 2022 11:29:01 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */function O(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var _=/javascript\s*\:/gim;R.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},R.getDefaultWhiteList=O,R.onAttr=function(){},R.onIgnoreAttr=function(){},R.safeAttrValue=function(t,r){return _.test(r)?"":r};var z=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},I=function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")},P=R,U=function(t,r){";"!==(t=I(t))[t.length-1]&&(t+=";");var i=t.length,e=!1,n=0,o=0,s="";function a(){if(!e){var i=z(t.slice(n,o)),a=i.indexOf(":");if(-1!==a){var u=z(i.slice(0,a)),f=z(i.slice(a+1));if(u){var c=r(n,s.length,u,f,i);c&&(s+=c+"; ")}}}n=o+1}for(;o<i;o++){var u=t[o];if("/"===u&&"*"===t[o+1]){var f=t.indexOf("*/",o+2);if(-1===f)break;n=(o=f+1)+1,e=!1}else"("===u?e=!0:")"===u?e=!1:";"===u?e||a():"\n"===u&&a()}return z(s)};function N(t){return null==t}function T(t){(t=function(t){var r={};for(var i in t)r[i]=t[i];return r}(t||{})).whiteList=t.whiteList||P.whiteList,t.onAttr=t.onAttr||P.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||P.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||P.safeAttrValue,this.options=t}T.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var r=this.options,i=r.whiteList,e=r.onAttr,n=r.onIgnoreAttr,o=r.safeAttrValue;return U(t,(function(t,r,s,a,u){var f=i[s],c=!1;if(!0===f?c=f:"function"==typeof f?c=f(a):f instanceof RegExp&&(c=f.test(a)),!0!==c&&(c=!1),a=o(s,a)){var h,l={position:r,sourcePosition:t,source:u,isWhite:c};return c?N(h=e(s,a,l))?s+":"+a:h:N(h=n(s,a,l))?void 0:h}}))};var F=T;!function(t,r){var i=R,e=F;for(var n in(r=t.exports=function(t,r){return new e(r).process(t)}).FilterCSS=e,i)r[n]=i[n]}(j,j.exports);var C={indexOf:function(t,r){var i,e;if(Array.prototype.indexOf)return t.indexOf(r);for(i=0,e=t.length;i<e;i++)if(t[i]===r)return i;return-1},forEach:function(t,r,i){var e,n;if(Array.prototype.forEach)return t.forEach(r,i);for(e=0,n=t.length;e<n;e++)r.call(i,t[e],e,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var r=/\s|\n|\t/.exec(t);return r?r.index:-1}},D=j.exports.getDefaultWhiteList,B=C;var W=new(0,j.exports.FilterCSS);function Z(t){return t.replace(G,"&lt;").replace(L,"&gt;")}var G=/</g,L=/>/g,M=/"/g,J=/&quot;/g,K=/&#([a-zA-Z0-9]*);?/gim,H=/&colon;?/gim,$=/&newline;?/gim,q=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Y=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,X=/u\s*r\s*l\s*\(.*/gi;function V(t){return t.replace(M,"&quot;")}function Q(t){return t.replace(J,'"')}function tt(t){return t.replace(K,(function(t,r){return String.fromCharCode("x"===r[0]||"X"===r[0]?parseInt(r.substr(1),16):parseInt(r,10))}))}function rt(t){return t.replace(H,":").replace($," ")}function it(t){for(var r="",i=0,e=t.length;i<e;i++)r+=t.charCodeAt(i)<32?" ":t.charAt(i);return B.trim(r)}function et(t){return it(t=rt(t=tt(t=Q(t))))}function nt(t){return Z(t=V(t))}E.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},E.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},E.onTag=function(){},E.onIgnoreTag=function(){},E.onTagAttr=function(){},E.onIgnoreTagAttr=function(){},E.safeAttrValue=function(t,r,i,e){if(i=et(i),"href"===r||"src"===r){if("#"===(i=B.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===r){if(q.lastIndex=0,q.test(i))return""}else if("style"===r){if(Y.lastIndex=0,Y.test(i))return"";if(X.lastIndex=0,X.test(i)&&(q.lastIndex=0,q.test(i)))return"";!1!==e&&(i=(e=e||W).process(i))}return nt(i)},E.escapeHtml=Z,E.escapeQuote=V,E.unescapeQuote=Q,E.escapeHtmlEntities=tt,E.escapeDangerHtml5Entities=rt,E.clearNonPrintableCharacter=it,E.friendlyAttrValue=et,E.escapeAttrValue=nt,E.onIgnoreTagStripAll=function(){return""},E.StripTagBody=function(t,r){"function"!=typeof r&&(r=function(){});var i=!Array.isArray(t),e=[],n=!1;return{onIgnoreTag:function(o,s,a){if(function(r){return!!i||-1!==B.indexOf(t,r)}(o)){if(a.isClosing){var u="[/removed]";return e.push([!1!==n?n:a.position,a.position+u.length]),n=!1,u}return n||(n=a.position),"[removed]"}return r(o,s,a)},remove:function(t){var r="",i=0;return B.forEach(e,(function(e){r+=t.slice(i,e[0]),i=e[1]})),r+=t.slice(i)}}},E.stripCommentTag=function(t){for(var r="",i=0;i<t.length;){var e=t.indexOf("\x3c!--",i);if(-1===e){r+=t.slice(i);break}r+=t.slice(i,e);var n=t.indexOf("--\x3e",e);if(-1===n)break;i=n+3}return r},E.stripBlankChar=function(t){var r=t.split("");return(r=r.filter((function(t){var r=t.charCodeAt(0);return!(127===r||r<=31&&10!==r&&13!==r)}))).join("")},E.cssFilter=W,E.getDefaultCSSWhiteList=D;var ot={},st=C;function at(t){var r,i=st.spaceIndex(t);return r=t.slice(1,-1===i?-1:i+1),"/"===(r=st.trim(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function ut(t){return"</"===t.slice(0,2)}var ft=/[^a-zA-Z0-9\\_:.-]/gim;function ct(t,r){for(;r<t.length;r++){var i=t[r];if(" "!==i)return"="===i?r:-1}}function ht(t,r){for(;r<t.length;r++){var i=t[r];if(" "!==i)return"'"===i||'"'===i?r:-1}}function lt(t,r){for(;r>0;r--){var i=t[r];if(" "!==i)return"="===i?r:-1}}function dt(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}ot.parseTag=function(t,r,i){var e="",n=0,o=!1,s=!1,a=0,u=t.length,f="",c="";t:for(a=0;a<u;a++){var h=t.charAt(a);if(!1===o){if("<"===h){o=a;continue}}else if(!1===s){if("<"===h){e+=i(t.slice(n,a)),o=a,n=a;continue}if(">"===h||a===u-1){e+=i(t.slice(n,o)),f=at(c=t.slice(o,a+1)),e+=r(o,e.length,f,c,ut(c)),n=a+1,o=!1;continue}if('"'===h||"'"===h)for(var l=1,d=t.charAt(a-l);""===d.trim()||"="===d;){if("="===d){s=h;continue t}d=t.charAt(a-++l)}}else if(h===s){s=!1;continue}}return n<u&&(e+=i(t.substr(n))),e},ot.parseAttr=function(t,r){var i=0,e=0,n=[],o=!1,s=t.length;function a(t,i){if(!((t=(t=st.trim(t)).replace(ft,"").toLowerCase()).length<1)){var e=r(t,i||"");e&&n.push(e)}}for(var u=0;u<s;u++){var f,c=t.charAt(u);if(!1!==o||"="!==c)if(!1===o||u!==e){if(/\s|\n|\t/.test(c)){if(t=t.replace(/\s|\n|\t/g," "),!1===o){if(-1===(f=ct(t,u))){a(st.trim(t.slice(i,u))),o=!1,i=u+1;continue}u=f-1;continue}if(-1===(f=lt(t,u-1))){a(o,dt(st.trim(t.slice(i,u)))),o=!1,i=u+1;continue}}}else{if(-1===(f=t.indexOf(c,u+1)))break;a(o,st.trim(t.slice(e+1,f))),o=!1,i=(u=f)+1}else o=t.slice(i,u),e='"'===t.charAt(i=u+1)||"'"===t.charAt(i)?i:ht(t,u+1)}return i<t.length&&(!1===o?a(t.slice(i)):a(o,dt(st.trim(t.slice(i))))),st.trim(n.join(" "))};var pt=j.exports.FilterCSS,mt=E,vt=ot.parseTag,bt=ot.parseAttr,gt=C;function wt(t){return null==t}function yt(t){(t=function(t){var r={};for(var i in t)r[i]=t[i];return r}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=mt.onIgnoreTagStripAll),t.whiteList=t.whiteList||t.allowList?function(t){var r={};for(var i in t)Array.isArray(t[i])?r[i.toLowerCase()]=t[i].map((function(t){return t.toLowerCase()})):r[i.toLowerCase()]=t[i];return r}(t.whiteList||t.allowList):mt.whiteList,t.onTag=t.onTag||mt.onTag,t.onTagAttr=t.onTagAttr||mt.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||mt.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||mt.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||mt.safeAttrValue,t.escapeHtml=t.escapeHtml||mt.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new pt(t.css))}yt.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var r=this.options,i=r.whiteList,e=r.onTag,n=r.onIgnoreTag,o=r.onTagAttr,s=r.onIgnoreTagAttr,a=r.safeAttrValue,u=r.escapeHtml,f=this.cssFilter;r.stripBlankChar&&(t=mt.stripBlankChar(t)),r.allowCommentTag||(t=mt.stripCommentTag(t));var c=!1;r.stripIgnoreTagBody&&(c=mt.StripTagBody(r.stripIgnoreTagBody,n),n=c.onIgnoreTag);var h=vt(t,(function(t,r,c,h,l){var d={sourcePosition:t,position:r,isClosing:l,isWhite:Object.prototype.hasOwnProperty.call(i,c)},p=e(c,h,d);if(!wt(p))return p;if(d.isWhite){if(d.isClosing)return"</"+c+">";var m=function(t){var r=gt.spaceIndex(t);if(-1===r)return{html:"",closing:"/"===t[t.length-2]};var i="/"===(t=gt.trim(t.slice(r+1,-1)))[t.length-1];return i&&(t=gt.trim(t.slice(0,-1))),{html:t,closing:i}}(h),v=i[c],b=bt(m.html,(function(t,r){var i=-1!==gt.indexOf(v,t),e=o(c,t,r,i);return wt(e)?i?(r=a(c,t,r,f))?t+'="'+r+'"':t:wt(e=s(c,t,r,i))?void 0:e:e}));return h="<"+c,b&&(h+=" "+b),m.closing&&(h+=" /"),h+">"}return wt(p=n(c,h,d))?u(h):p}),u);return c&&(h=c.remove(h)),h};var kt,xt,St=yt;
/** @license
 * Copyright 2018 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function At(t){return new Promise((r=>{jt(t).then((t=>{try{r(JSON.parse(t))}catch(t){r(null)}}),(()=>r(null)))}))}function Et(t,r,i){return t?
/** @license
 * Copyright 2020 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,r,i){let e;try{e=new File(t,r,i)}catch(n){e=function(){void 0===i&&(i={type:""});const e=new Blob(t,i);return e.lastModified=new Date,e.name=r,e}()}return e}([t],r||"",{type:i||t.type}):null}function jt(t){return new Promise((r=>{const i=new FileReader;i.onload=function(t){r(t.target.result||"")},i.readAsText(t)}))}function Rt(t,r){return r.split(".").reduce((function(t,r){return t?t[r]:void 0}),t)}function Ot(t,r,i){const e=r.split(".");e.reduce(((t,r,n)=>n===e.length-1?(t[r]=i,i):(t[r]||(t[r]={}),t[r])),t)}function _t(t,r,i=[]){return new Promise(((e,n)=>{(function(t,r,i={}){return t?g(t,{authentication:r,rawResponse:!0,...i}).then((t=>t.blob())):Promise.reject("Url must be provided")}
/** @license
 * Copyright 2018 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(t,r).then((t=>{zt(t).then((t=>{"application/json"===t.type?At(t).then((r=>{if(r?.error){const t=r.error.code;void 0!==t&&i.indexOf(t)>=0?e(null):n(r)}else e(t)})):e(t)}),n)}),n)}))}function zt(t){return new Promise(((r,i)=>{t&&t.size>0&&(t.type.startsWith("text/plain")||t.type.startsWith("application/json"))?jt(t).then((i=>{try{JSON.parse(i),r(new Blob([t],{type:"application/json"}))}catch(e){i.length>4&&"PK"===i.substr(0,4)?r(new Blob([t],{type:"application/zip"})):i.startsWith("<")?r(new Blob([t],{type:"text/xml"})):r(t)}}),i):t?r(t):i()}))}
/** @license
 * Copyright 2018 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/** @license
 * Copyright 2020 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function It(t,r=0){const i=t.split("/");let e=i.pop(),n="";const o=i.shift();let s=l.Resource;if(o)if(o.endsWith("_info_thumbnail"))s=l.Thumbnail;else if(o.endsWith("_info_metadata"))s=l.Metadata,e="metadata.xml";else if(o.endsWith("_info_data"))s=l.Data;else if(o.endsWith("_info_dataz"))e=e.replace(/\.zip$/,""),s=l.Data;else if(r<1){const t=o.indexOf("_");t>0&&(n=o.substr(t+1))}else n=i.join("/");return{type:s,folder:n,filename:e}}
/** @license
 * Copyright 2021 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,r,i){return{...t,fetchedFromSource:r,copiedToDestination:i}}
/** @license
 * Copyright 2021 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/** @license
 * Copyright 2021 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ut(t,r,i,e=40){return new Promise((n=>{let o=[];const s=[];t.length>0&&function(t,r){const i=[];let e=0;for(;e<t.length;)i.push(t.slice(e,e+r)),e+=r;return i}(t,e).forEach(((t,r)=>{const i={filename:`resources${r}.zip`,zip:new S,filelist:[]};o=o.concat(t.map((t=>function(t,r){return t.folder?r.zip.folder(t.folder).file(t.filename,t.file,{binary:!0}):r.zip.file(t.filename,t.file,{binary:!0}),r.filelist.push(t),Pt(t,!0)}
/** @license
 * Copyright 2021 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,i)))),s.push(i)})),o.length>0?Promise.all(o).then((t=>{t=t.filter((t=>!(t.fetchedFromSource&&void 0===t.copiedToDestination))),function(t,r,i){return new Promise((e=>{const n=t.filter((t=>Object.keys(t.zip.files).length>0));n.length>0?Nt(n,r,i).then((t=>{e(t)})):e([])}))}(s,r,i).then((r=>{n(t.concat(r))}))})):n([])}))}function Nt(t,r,i){return new Promise((e=>{let n=[];const o=t.pop();let s=Promise.resolve([]);t.length>0&&(s=Nt(t,r,i)),s.then((t=>(n=t,new Promise((t=>{setTimeout((()=>t()),1e3)}))))).then((()=>function(t,r,i){return new Promise((e=>{t.zip.generateAsync({type:"blob"}).then((r=>Et(r,t.filename,"application/zip"))).then((t=>{return x(e={id:r,resource:t,authentication:i,params:{archive:!0}}).then((function(t){var r=k(e)+"/content/users/"+t+"/items/"+e.id+"/addResources";return e.params=y({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content,access:e.private?"private":"inherit"},e.params),g(r,e)}));var e})).then((()=>e(Pt(t,!0,!0))),(()=>e(Pt(t,!0,!1))))}))}(o,r,i))).then((t=>{t.filelist.forEach((r=>{n.push(Pt(r,!0,t.copiedToDestination))})),e(n)}))}))}
/** @license
 * Copyright 2018 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,r){var i=E,e=ot,n=St;function o(t,r){return new n(r).process(t)}(r=t.exports=o).filterXSS=o,r.FilterXSS=n,function(){for(var t in i)r[t]=i[t];for(var n in e)r[n]=e[n]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=t.exports)}(A,A.exports),function(t){t[t.NotYetVisited=0]="NotYetVisited",t[t.InProgress=1]="InProgress",t[t.Finished=2]="Finished"}(kt||(kt={})),function(t){t[t.thumbnail=0]="thumbnail",t[t.metadata=1]="metadata",t[t.resource=2]="resource",t[t.data=3]="data",t[t.fakezip=4]="fakezip",t[t.info=5]="info"}(xt||(xt={}));
/** @license
 * Copyright 2022 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Tt={solutionItemId:"",defaultWkid:void 0,solutionData:{metadata:{},templates:[]},templateEdits:{},featureServices:[],spatialReferenceInfo:{enabled:!1,services:{},spatialReference:void 0}},Ft=class{static get Store(){return this._instance||(this._instance=new this)}constructor(){this._hasChanges=!1,this._store=t(Object.assign({},Tt))}getItemInfo(t){let r;return this._store.get("solutionData").templates.some((i=>t==i.itemId&&(r=i,!0))),r}getStoreInfo(t){return this._store.get(t)}async loadSolution(t,r){this._authentication=r;const i=await function(t,r){return new Promise((i=>{(function(t,r){return new Promise((i=>{const e=function(t,r){return`${function(t){return Rt(t,"portal")||"https://www.arcgis.com/sharing/rest"}(r)}/content/items/${t}/data`}(t,r);_t(e,r,[400,500]).then((t=>i(zt(t))),(()=>i(null)))}))})(t,r).then((t=>i(At(t))),(()=>i(null)))}))}(t,r);if(i){const e=Rt(i,"params.wkid.default");await this._prepareSolutionItemsForEditing(t,i.templates,r);const n=this._getFeatureServices(i.templates),o=this._getSpatialReferenceInfo(n,e);this._store.set("solutionItemId",t),this._store.set("defaultWkid",e),this._store.set("solutionData",i),this._store.set("featureServices",n),this._store.set("spatialReferenceInfo",o)}this._flagStoreHasChanges(!1)}replaceItemThumbnail(t){t.resourceFilePaths.forEach((t=>{t.type===l.Thumbnail&&(t.updateType===r.None?t.updateType=r.Remove:t.updateType!==r.Add&&t.updateType!==r.Update||(t.updateType=r.Obsolete))})),t.resourceFilePaths=t.resourceFilePaths.filter((t=>t.updateType!=r.Obsolete)),t.resourceFilePaths.push({blob:t.thumbnail,filename:t.thumbnail.name,type:l.Thumbnail,updateType:r.Add}),this.setItemInfo(t)}async saveSolution(){const t=this._store.get("solutionItemId"),r=this._store.get("solutionData"),i=this._store.get("spatialReferenceInfo");await this._prepareSolutionItemsForStorage(t,r.templates,this._authentication);const e=this._setSpatialReferenceInfo(i,r.templates);Ot(r,"params.wkid",e?{label:"Spatial Reference",default:e,valueType:"spatialReference",attributes:{required:"true"}}:{});const n={id:t,text:r};await function(t,r){return new Promise(((i,e)=>{var n;(n={item:t,folderId:void 0,authentication:r,params:{}},x(n).then((function(t){var r,i,e,o=n.folderId?k(n)+"/content/users/"+t+"/"+n.folderId+"/items/"+n.item.id+"/update":k(n)+"/content/users/"+t+"/items/"+n.item.id+"/update";return n.params=y(y({},n.params),(r=n.item,(i=JSON.parse(JSON.stringify(r))).data&&("undefined"!=typeof Blob&&r.data instanceof Blob||"ReadStream"===r.data.constructor.name?i.file=r.data:i.text=r.data,delete i.data),i)),n.params.extent&&(e=n.params.extent,Array.isArray(e)&&Array.isArray(e[0])&&Array.isArray(e[1]))&&(n.params.extent=function(t){return t.join(",")}(n.params.extent)),g(o,n)}))).then((t=>t.success?i(t):e(t)),(t=>e(t)))}))}
/** @license
 * Copyright 2018 Esri
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,this._authentication)}setItemInfo(t){const r=this._store.get("solutionData");r.templates.some((i=>t.itemId==i.itemId&&(i=t,this._store.set("solutionData",r),this._flagStoreHasChanges(!0),!0)))}setStoreInfo(t,r){this._store.set(t,r),this._flagStoreHasChanges(!0)}_testAccess(t,r,i,e){switch(t){case"_emptyTheStore":this._emptyTheStore();break;case"_getFeatureServices":return this._getFeatureServices(r);case"_getItemsSharedWithThisGroup":return this._getItemsSharedWithThisGroup(r,i);case"_getResourceFilePaths":return this._getResourceFilePaths(r,i,e);case"_getResourceStorageName":return this._getResourceStorageName(r,i);case"_getSpatialReferenceInfo":return this._getSpatialReferenceInfo(r,i);case"_prepareSolutionItemsForEditing":return this._prepareSolutionItemsForEditing(r,i,e);case"_prepareSolutionItemsForStorage":return this._prepareSolutionItemsForStorage(r,i,e);case"_setSpatialReferenceInfo":return this._setSpatialReferenceInfo(r,i);case"_splitFilename":return this._splitFilename(r)}return null}_emptyTheStore(){this._store.set("solutionItemId",Tt.solutionItemId),this._store.set("defaultWkid",Tt.defaultWkid),this._store.set("solutionData",Tt.solutionData),this._store.set("templateEdits",Tt.templateEdits),this._store.set("featureServices",Tt.featureServices),this._store.set("spatialReferenceInfo",Tt.spatialReferenceInfo)}_flagStoreHasChanges(t){this._hasChanges!==t&&window.dispatchEvent(new CustomEvent("solutionStoreHasChanges",{detail:t,bubbles:!0,cancelable:!1,composed:!0})),this._hasChanges=t}_getCustomizableFeatureServices(t){return t.reduce(((t,r)=>("Feature Service"===r.type&&r.item.typeKeywords.indexOf("View Service")<0&&t.push(r),t)),[])}_getFeatureServices(t){return this._getCustomizableFeatureServices(t).map((t=>({name:t.item.title||t.item.name,enabled:Rt(t,"properties.service.spatialReference.wkid").toString().startsWith("{{params.wkid||")})))}_getItemsSharedWithThisGroup(t,r){return r.reduce(((r,i)=>(i.itemId!==t.itemId&&"Group"!==i.type&&r.push({id:i.itemId,title:i.item.name||i.item.title,isShared:(i.groups||[]).indexOf(t.itemId)>-1,shareItem:(i.groups||[]).indexOf(t.itemId)>-1,type:i.type,typeKeywords:i.item.typeKeywords}),r)),[])}_getResourceFilePaths(t,i,e){return function(t,r,i=[],e=0){return i.map((i=>{return{url:(n=t,o=r,s=i,((a=n)?a.endsWith("/")?a:a+"/":a)+"content/items/"+o+"/resources/"+s),...It(i,e)};var n,o,s,a}))}(e,t,i.resources,1).map((t=>(t.updateType=r.None,t)))}_getResourceStorageName(t,r){let i=t;switch(r.type){case l.Data:i=`${i}_info_data`;break;case l.Info:i=`${i}_info`;break;case l.Metadata:i=`${i}_info_metadata`;break;case l.Resource:break;case l.Thumbnail:i=`${i}_info_thumbnail`}let e=r.filename;return r.type==l.Data&&e&&!function(t){const r=t.match(/\.([a-z]+)$/i);return!!r&&"|.json|.xml|.txt|.png|.pbf|.zip|.jpeg|.jpg|.gif|.bmp|.gz|.svg|.svgz|.geodatabase|".indexOf("|"+r[0]+"|")>=0}(e)&&(e+=".zip",i+="z"),i+"/"+(r.folder?r.folder+"/"+e:e)}_getSpatialReferenceInfo(t,r){const i={};return t.forEach((t=>{i[t.name]=t.enabled})),{enabled:void 0!==r,services:i,spatialReference:r||void 0}}async _prepareSolutionItemsForEditing(t,r,i){const e=[];r.forEach((n=>{n.resourceFilePaths=this._getResourceFilePaths(t,n,i.portal),e.push(n.resourceFilePaths.length>0?function(t,r){let i,e;return r.forEach((t=>{t.type===l.Thumbnail&&(i=t.url,e=t.filename)})),i?function(t,r,i){return new Promise((e=>{(function(t,r,i,e=[],n){return new Promise(((o,s)=>{_t(t,i,e).then((t=>o(t?Et(t,r,n):null)),s)}))})(t,r,i,[500]).then(e,(()=>e(null)))}))}(i,e,t):Promise.resolve(null)}(i,n.resourceFilePaths):Promise.resolve()),n.groupDetails="Group"===n.type?this._getItemsSharedWithThisGroup(n,r):[]}));const n=await Promise.all(e);return r.forEach(((t,r)=>{t.thumbnail=n[r]?n[r]:void 0})),Promise.resolve()}async _prepareSolutionItemsForStorage(t,i,e){const n=[],o=[];return i.forEach((i=>{i.resourceFilePaths.forEach((async s=>{const a=this._getResourceStorageName(i.itemId,s);switch(s.updateType){case r.Add:const{prefix:u,suffix:f}=this._splitFilename(a);i.resources.push(a),n.push({itemId:i.itemId,file:s.blob,folder:u,filename:f});break;case r.Update:o.push(new Promise((async r=>{try{await function(t,r,i,e){const n=r.split("/"),o=n.length>1?n.slice(0,n.length-1).join("/"):void 0;return x(s={id:t,prefix:o,name:n[n.length-1],resource:i,authentication:e}).then((function(t){var r=k(s)+"/content/users/"+t+"/items/"+s.id+"/updateResources";return s.params=y({file:s.resource,fileName:s.name,resourcesPrefix:s.prefix,text:s.content},s.params),void 0!==s.private&&(s.params.access=s.private?"private":"inherit"),g(r,s)}));var s}(t,a,s.blob,e)}catch(t){console.log("Unable to update "+a+" for item "+i.itemId+": "+JSON.stringify(t))}r()})));break;case r.Remove:o.push(new Promise((async r=>{try{await function(t,r,i){return x(e={id:t,resource:r,authentication:i}).then((function(t){var r=k(e)+"/content/users/"+t+"/items/"+e.id+"/removeResources";return e.params=y(y({},e.params),{resource:e.resource}),void 0!==e.deleteAll&&(e.params.deleteAll=e.deleteAll),g(r,e)}));var e}(t,a,e),i.resources=i.resources.filter((t=>t!==a))}catch(t){console.log("Unable to remove "+a+" for item "+i.itemId+": "+JSON.stringify(t))}r()})))}return Promise.resolve()})),delete i.resourceFilePaths,delete i.thumbnail,delete i.groupDetails})),Promise.all(o).then((async()=>{var r,i,o;return n.length>0&&await(r=n,i=t,o=e,new Promise((t=>{Ut(r,i,o).then((r=>{t(r.filter((t=>t.fetchedFromSource&&t.copiedToDestination)).map((t=>t.folder+"/"+t.filename)))}))}))),Promise.resolve()}))}_setSpatialReferenceInfo(t,r){const i="{{params.wkid||",e=this._getCustomizableFeatureServices(r);return t.enabled?(e.forEach((r=>{let e;t.services[r.item.title||r.item.name]?(e=`{{params.wkid||${t.spatialReference}}}`,Ot(r,"properties.service.spatialReference.wkid",e)):(e=Rt(r,"properties.service.spatialReference.wkid"),e.toString().startsWith(i)&&(e=e.toString().substring(i.length,e.length-2),Ot(r,"properties.service.spatialReference.wkid",e)))})),t.spatialReference):void e.forEach((t=>{const r=Rt(t,"properties.service.spatialReference.wkid");r.toString().startsWith(i)&&Ot(t,"properties.service.spatialReference.wkid",r.toString().substring(i.length,r.length-2))}))}_splitFilename(t){const r=t.split("/");return{prefix:r.length>1?r.slice(0,r.length-1).join("/"):void 0,suffix:r[r.length-1]}}}.Store;export{b as A,l as E,m as N,w as c,c as e,Rt as g,g as r,Ft as s}