/*!
 * Copyright 2022 Esri
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 */
import{r as t,c as i,h as a,g as n}from"./p-f8be5d5f.js";import{c as e}from"./p-f5d21f80.js";import{h as s}from"./p-dd3d070d.js";import{s as r,a as o,c}from"./p-5b5ad89d.js";import{i as l,a as h,r as m,n as p,b as u}from"./p-b1eb8e9b.js";import"./p-e1a4994d.js";import"./p-d1bcb992.js";import"./p-062f1fe7.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */const d=e(),f=class{constructor(a){t(this,a),this.calciteColorPickerHexInputChange=i(this,"calciteColorPickerHexInputChange",6),this.onCalciteInternalInputBlur=()=>{const t=this.inputNode,i=t.value,a=`#${i}`;this.allowEmpty&&!i||l(a)&&h(a)||(t.value=this.allowEmpty&&!this.internalColor?"":this.formatForInternalInput(m(this.internalColor.object())))},this.onInputChange=()=>{this.internalSetValue(this.inputNode.value,this.value)},this.previousNonNullValue=this.value,this.storeInputRef=t=>{this.inputNode=t},this.hexLabel="Hex",this.allowEmpty=!1,this.scale="m",this.value=p(d.hex()),this.numberingSystem=void 0,this.internalColor=d}connectedCallback(){const{allowEmpty:t,value:i}=this;if(i){const t=p(i);l(t)&&this.internalSetValue(t,t,!1)}else t&&this.internalSetValue(null,null,!1)}componentWillLoad(){r(this)}componentDidLoad(){o(this)}handleValueChange(t,i){this.internalSetValue(t,i,!1)}onInputKeyDown(t){const{altKey:i,ctrlKey:a,metaKey:n,shiftKey:e}=t,{internalColor:s,value:r}=this,{key:o}=t;if("Tab"===o||"Enter"===o)return void this.onInputChange();const c=this.value;if("ArrowDown"===o||"ArrowUp"===o)return r?(this.internalSetValue(p(this.nudgeRGBChannels(s,(e?10:1)*("ArrowUp"===o?1:-1)).hex()),c),void t.preventDefault()):(this.internalSetValue(this.previousNonNullValue,c),void t.preventDefault());const l=i||a||n,h=1===o.length,m=u.test(o);!h||l||m||t.preventDefault()}onPaste(t){const i=t.clipboardData.getData("text");l(i)&&(t.preventDefault(),this.inputNode.value=i.slice(1))}render(){const{value:t}=this,i=this.formatForInternalInput(t);return a("div",{class:"container"},a("calcite-input",{class:"input",label:this.hexLabel,maxLength:6,numberingSystem:this.numberingSystem,onCalciteInputChange:this.onInputChange,onCalciteInternalInputBlur:this.onCalciteInternalInputBlur,onKeyDown:this.handleKeyDown,onPaste:this.onPaste,prefixText:"#",scale:this.scale,value:i,ref:this.storeInputRef}),i?a("calcite-color-picker-swatch",{active:!0,class:"preview",color:`#${i}`,scale:this.scale}):null)}async setFocus(){await c(this),s(this.inputNode)}internalSetValue(t,i,a=!0){if(t){const i=p(t);if(l(i)){const{internalColor:t}=this,n=!t||i!==p(t.hex());return this.internalColor=e(i),this.previousNonNullValue=i,this.value=i,void(n&&a&&this.calciteColorPickerHexInputChange.emit())}}else if(this.allowEmpty)return this.internalColor=null,this.value=null,void(a&&this.calciteColorPickerHexInputChange.emit());this.value=i}formatForInternalInput(t){return t?t.replace("#",""):""}nudgeRGBChannels(t,i){return e.rgb(t.array().map((t=>t+i)))}handleKeyDown(t){"Enter"===t.key&&t.preventDefault()}get el(){return n(this)}static get watchers(){return{value:["handleValueChange"]}}};f.style="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:block}.container{display:inline-grid;inline-size:100%;align-items:center;grid-template-columns:1fr auto}.preview{grid-column:2/3;pointer-events:none;margin-block:0px;margin-inline:0.25rem;display:flex;align-items:center}.preview,.input{grid-row:1}.input{grid-column:1/3;inline-size:100%;text-transform:uppercase}";export{f as calcite_color_picker_hex_input}